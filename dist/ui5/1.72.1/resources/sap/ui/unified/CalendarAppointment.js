/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./DateTypeRange","sap/ui/core/format/DateFormat","./library","sap/base/Log"],function(e,t,a,r){"use strict";var n=e.extend("sap.ui.unified.CalendarAppointment",{metadata:{library:"sap.ui.unified",properties:{title:{type:"string",group:"Data"},text:{type:"string",group:"Data"},icon:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},tentative:{type:"boolean",group:"Data",defaultValue:false},selected:{type:"boolean",group:"Data",defaultValue:false},key:{type:"string",group:"Data",defaultValue:null},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null}}}});n.prototype.applyFocusInfo=function(e){var t=this.getParent();if(t){t.applyFocusInfo(e)}return this};n.prototype._getDateRangeIntersectionText=function(e){var a=this.getStartDate(),r=this.getEndDate()?this.getEndDate():new Date(864e12),n,i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),o=new Date(i.getTime()+24*60*60*1e3),p=t.getTimeInstance({pattern:"HH:mm"}),g=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(a.getTime()>o.getTime()||r.getTime()<i.getTime()){n=""}else if(a.getTime()<i.getTime()&&r.getTime()>o.getTime()){n=g.getText("PLANNINGCALENDAR_ALLDAY")}else if(a.getTime()<i.getTime()){n=g.getText("PLANNINGCALENDAR_UNTIL",[p.format(r)])}else if(r.getTime()>o.getTime()){n=p.format(a)}else{n=p.format(a)+" - "+p.format(r)}return n};n._getComparer=function(e){var t=24*60*60*1e3,a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime(),r=a+t;return function(e,t){var n=e.appointment.getStartDate().getTime(),i=t.appointment.getStartDate().getTime(),o=e.appointment.getEndDate()?e.appointment.getEndDate().getTime():864e12,p=t.appointment.getEndDate()?t.appointment.getEndDate().getTime():864e12,g=n<=a&&o>=r,u=i<=a&&p>=r,l;if(g&&u||!g&&!u){l=n-i;if(l===0){l=p-o}}else if(g){l=-1}else{l=1}return l}};n.prototype.setColor=function(e){if(e&&e.match(/^#[0-9a-f]{6}$/i)){r.warning("setColor accepts only full hex color value with pound symbol.")}return this.setProperty("color",e)};n.prototype._getCSSColorForBackground=function(e){return"rgba("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(",")+", 0.2)"};return n});