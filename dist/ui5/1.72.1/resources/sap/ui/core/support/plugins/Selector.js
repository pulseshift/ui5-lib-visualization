/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Popup","../Plugin","../Support","sap/ui/thirdparty/jquery","sap/base/util/uid"],function(e,t,i,o,n){"use strict";var r=t.extend("sap.ui.core.support.plugins.Selector",{constructor:function(i){t.apply(this,["sapUiSupportSelector","",i]);this._aEventIds=[this.getId()+"Highlight"];this._oPopup=new e}});r.prototype.isToolPlugin=function(){return false};r.prototype.onsapUiSupportSelectorHighlight=function(e){s(e.getParameter("id"),this,e.getParameter("sendInfo"))};r.prototype.init=function(e){t.prototype.init.apply(this,arguments);var i;if(!this._sPopupId){this._sPopupId=this.getId()+"-"+n();var r=sap.ui.getCore().createRenderManager();r.write("<div id='"+this._sPopupId+"' style='border: 2px solid rgb(0, 128, 0); background-color: rgba(0, 128, 0, .55);'></div>");r.flush(sap.ui.getCore().getStaticAreaRef(),false,true);r.destroy();i=o(document.getElementById(this._sPopupId));this._oPopup.setContent(i[0])}else{i=o(document.getElementById(this._sPopupId))}var u=this;this._fSelectHandler=function(e){if(!e.shiftKey||!e.altKey||!e.ctrlKey){return}var t=jQuery(e.target).closest("[data-sap-ui]").attr("id");if(s(t,u,true)){e.stopPropagation();e.preventDefault()}};this._fCloseHandler=function(e){u._oPopup.close(0)};i.bind("click",this._fCloseHandler);jQuery(document).bind("mousedown",this._fSelectHandler)};r.prototype.exit=function(e){this._oPopup.close(0);if(this._fCloseHandler){o(document.getElementById(this._sPopupId)).unbind("click",this._fCloseHandler);this._fCloseHandler=null}if(this._fSelectHandler){jQuery(document).unbind("mousedown",this._fSelectHandler);this._fSelectHandler=null}t.prototype.exit.apply(this,arguments)};function s(e,t,n){if(e){var r=sap.ui.getCore().byId(e);if(r){var s=o(document.getElementById(t._sPopupId));var p=r.$();if(p.is(":visible")){s.width(p.outerWidth());s.height(p.outerHeight());t._oPopup.open(0,"BeginTop","BeginTop",p[0],"0 0","none");if(n){i.getStub().sendEvent(t.getId()+"Select",u(r,t))}setTimeout(function(){t._oPopup.close(0)},1e3);return true}}}return false}function u(e,t){return{id:e.getId()}}return r});