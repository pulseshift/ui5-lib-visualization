/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/base/ManagedObjectMetadata","sap/base/util/ObjectPath","sap/ui/util/XMLHelper","sap/base/Log"],function(t,e,n,r,o){"use strict";return({bySelector:function(t,e,n){var r=this.getControlIdBySelector(t,e);return this._byId(r,n)},getControlIdBySelector:function(t,e){if(!t){return undefined}if(typeof t==="string"){t={id:t}}var n=t.id;if(t.idIsLocal){if(e){n=e.createId(n)}else{throw new Error("App Component instance needed to get a control's ID from selector")}}else{var r=/^application-[^-]*-[^-]*-component---/gim;var o=!!r.exec(t.id);if(o){n=n.replace(/^application-[^-]*-[^-]*-component---/g,"");if(e){n=e.createId(n)}else{throw new Error("App Component instance needed to get a control's ID from selector")}}}return n},getSelector:function(t,e,n){var r=t;if(typeof r!=="string"){r=t?this.getId(t):undefined}else if(!e){throw new Error("App Component instance needed to get a selector from string ID")}if(n&&(n.id||n.idIsLocal)){throw new Error("A selector of control with the ID '"+r+"' was requested, "+"but core properties were overwritten by the additionally passed information.")}var o=this.checkControlId(r,e);if(!o){throw new Error("Generated ID attribute found - to offer flexibility a stable control ID is needed to assign the changes to, but for this control the ID was generated by SAPUI5 "+r)}var i=Object.assign({},n,{id:"",idIsLocal:false});if(this.hasLocalIdSuffix(r,e)){var a=e.getLocalId(r);i.id=a;i.idIsLocal=true}else{i.id=r}return i},checkControlId:function(n,r){var o=n instanceof t?n.getId():n;var i=e.isGeneratedId(o);return!i||this.hasLocalIdSuffix(n,r)},hasLocalIdSuffix:function(e,n){var r=e instanceof t?e.getId():e;if(!n){o.error("Determination of a local ID suffix failed due to missing app component for "+r);return false}return!!n.getLocalId(r)},_checkAndPrefixIdsInFragment:function(t,e){var n=r.getParseError(t);if(n.errorCode!==0){throw new Error(t.parseError.reason)}var o=t.documentElement;var i=[],a=[];if(o.localName==="FragmentDefinition"){i=this._getElementNodeChildren(o)}else{i=[o]}a=[].concat(i);function c(t){a.push(t)}for(var s=0,f=i.length;s<f;s++){this._traverseXmlTree(c,i[s])}for(var g=0,u=a.length;g<u;g++){if(a[g].getAttribute("id")){a[g].setAttribute("id",e+"."+a[g].getAttribute("id"))}else{throw new Error("At least one control does not have a stable ID")}}return o},_getElementNodeChildren:function(t){var e=[];var n=t.childNodes;for(var r=0,o=n.length;r<o;r++){if(n[r].nodeType===1){e.push(n[r])}}return e},_isInstanceOf:function(t,e){var r=n.get(e);if(typeof r==="function"){return t instanceof r}else{return false}},_hasInterface:function(t,e){var n=t.getMetadata().getInterfaces();return n.indexOf(e)!==-1},_getControlMetadataInXml:function(t){var e=this._getControlTypeInXml(t);jQuery.sap.require(e);var r=n.get(e);return r.getMetadata()},getControlMetadata:function(t){},getLibraryName:function(t){var e=this.getControlMetadata(t);return e.getLibraryName()},_getControlTypeInXml:function(t){var e=t.namespaceURI;e=e?e+".":"";e+=t.localName;return e},_traverseXmlTree:function(t,e){function n(e,r,o){var i;if(!o){var a=this._getControlMetadataInXml(r);i=a.getAllAggregations()}var c=this._getElementNodeChildren(r);c.forEach(function(e){var o=i&&i[e.localName];n.call(this,r,e,o);if(!o){t(e)}}.bind(this))}n.call(this,e,e,false)},getPropertyBindingOrProperty:function(t,e){return this.getPropertyBinding(t,e)||this.getProperty(t,e)},setPropertyBindingOrProperty:function(t,e,n){var r=n&&(n.path||n.parts);var o=n&&typeof n==="string"&&n.substring(0,1)==="{"&&n.slice(-1)==="}";var i=r||o?"setPropertyBinding":"setProperty";this[i](t,e,n)},setVisible:function(t,e){},getVisible:function(t){},setStashed:function(t,e){},getStashed:function(t){},bindProperty:function(t,e,n){},unbindProperty:function(t,e){},bindAggregation:function(t,e,n){},unbindAggregation:function(t,e){},setProperty:function(t,e,n){},getProperty:function(t,e){},isPropertyInitial:function(t,e){},setPropertyBinding:function(t,e,n){},getPropertyBinding:function(t,e){},createControl:function(t,e,n,r,o,i){},applySettings:function(t,e){},_byId:function(t,e){},getId:function(t){},getParent:function(t){},getControlType:function(t){},setAssociation:function(t,e,n){},getAssociation:function(t,e){},getAllAggregations:function(t){},getAggregation:function(t,e){},insertAggregation:function(t,e,n,r,o){},removeAggregation:function(t,e,n){},removeAllAggregation:function(t,e){},getBindingTemplate:function(t,e){},updateAggregation:function(t,e){},findIndexInParentAggregation:function(t){},getParentAggregationName:function(t,e){},validateType:function(t,e,n,r,o){},instantiateFragment:function(t,e,n){},destroy:function(t){},getChangeHandlerModulePath:function(t){},attachEvent:function(t,e,n,r){},detachEvent:function(t,e,n){}})});