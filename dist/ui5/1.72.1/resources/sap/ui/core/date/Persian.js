/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./UniversalDate","../CalendarType"],function(t,e){"use strict";var r=t.extend("sap.ui.core.date.Persian",{constructor:function(){var t=arguments;if(t.length>1){t=o(t)}this.oDate=this.createDate(Date,t);this.sCalendarType=e.Persian}});r.UTC=function(){var t=o(arguments);return Date.UTC.apply(Date,t)};r.now=function(){return Date.now()};var n=1300;function a(t){var e=h(t.year,t.month+1,t.day);return y(e)}function i(t){var e=s(t.year,t.month+1,t.day);return f(e)}function o(t){var e=Array.prototype.slice.call(t),r,n;if(typeof t[0]!=="number"||typeof t[1]!=="number"||t[2]!==undefined&&typeof t[2]!="number"){e[0]=NaN;e[1]=NaN;e[2]=NaN;return e}r={year:t[0],month:t[1],day:t[2]!==undefined?t[2]:1};n=i(r);e[0]=n.year;e[1]=n.month;e[2]=n.day;return e}function u(t){var e=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178],r=e.length,n=t+621,a=-14,i=e[0],o,u,s,y,h,f,d;for(d=1;d<r;d+=1){o=e[d];u=o-i;if(t<o){break}a=a+p(u,33)*8+p(c(u,33),4);i=o}f=t-i;a=a+p(f,33)*8+p(c(f,33)+3,4);if(c(u,33)===4&&u-f===4){a+=1}y=p(n,4)-p((p(n,100)+1)*3,4)-150;h=20+a-y;if(u-f<6){f=f-u+p(u+4,33)*33}s=c(c(f+1,33)-1,4);if(s===-1){s=4}return{leap:s,gy:n,march:h}}function s(t,e,r){while(e<1){e+=12;t--}while(e>12){e-=12;t++}var n=u(t);return h(n.gy,3,n.march)+(e-1)*31-p(e,7)*(e-7)+r-1}function y(t){var e=f(t).year,r=e-621,n=u(r),a=h(e,3,n.march),i,o,s;s=t-a;if(s>=0){if(s<=185){o=1+p(s,31);i=c(s,31)+1;return{year:r,month:o-1,day:i}}else{s-=186}}else{r-=1;s+=179;if(n.leap===1){s+=1}}o=7+p(s,30);i=c(s,30)+1;return{year:r,month:o-1,day:i}}function h(t,e,r){var n=p((t+p(e-8,6)+100100)*1461,4)+p(153*c(e+9,12)+2,5)+r-34840408;n=n-p(p(t+100100+p(e-8,6),100)*3,4)+752;return n}function f(t){var e,r,n,a,i;e=4*t+139361631;e=e+p(p(4*t+183187720,146097)*3,4)*4-3908;r=p(c(e,1461),4)*5+308;n=p(c(r,153),5)+1;a=c(p(r,153),12)+1;i=p(e,1461)-100100+p(8-a,6);return{year:i,month:a-1,day:n}}function p(t,e){return~~(t/e)}function c(t,e){return t-~~(t/e)*e}r.prototype._getPersian=function(){return a({day:this.oDate.getDate(),month:this.oDate.getMonth(),year:this.oDate.getFullYear()})};r.prototype._setPersian=function(t){var e=i(t);return this.oDate.setFullYear(e.year,e.month,e.day)};r.prototype._getUTCPersian=function(){return a({day:this.oDate.getUTCDate(),month:this.oDate.getUTCMonth(),year:this.oDate.getUTCFullYear()})};r.prototype._setUTCPersian=function(t){var e=i(t);return this.oDate.setUTCFullYear(e.year,e.month,e.day)};r.prototype.getDate=function(t){return this._getPersian().day};r.prototype.getMonth=function(){return this._getPersian().month};r.prototype.getYear=function(){return this._getPersian().year-n};r.prototype.getFullYear=function(){return this._getPersian().year};r.prototype.setDate=function(t){var e=this._getPersian();e.day=t;return this._setPersian(e)};r.prototype.setMonth=function(t,e){var r=this._getPersian();r.month=t;if(e!==undefined){r.day=e}return this._setPersian(r)};r.prototype.setYear=function(t){var e=this._getPersian();e.year=t+n;return this._setPersian(e)};r.prototype.setFullYear=function(t,e,r){var n=this._getPersian();n.year=t;if(e!==undefined){n.month=e}if(r!==undefined){n.day=r}return this._setPersian(n)};r.prototype.getUTCDate=function(t){return this._getUTCPersian().day};r.prototype.getUTCMonth=function(){return this._getUTCPersian().month};r.prototype.getUTCFullYear=function(){return this._getUTCPersian().year};r.prototype.setUTCDate=function(t){var e=this._getUTCPersian();e.day=t;return this._setUTCPersian(e)};r.prototype.setUTCMonth=function(t,e){var r=this._getUTCPersian();r.month=t;if(e!==undefined){r.day=e}return this._setUTCPersian(r)};r.prototype.setUTCFullYear=function(t,e,r){var n=this._getUTCPersian();n.year=t;if(e!==undefined){n.month=e}if(r!==undefined){n.day=r}return this._setUTCPersian(n)};return r});