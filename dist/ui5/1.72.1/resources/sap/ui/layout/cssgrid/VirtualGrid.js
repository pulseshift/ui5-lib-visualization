/**
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/layout/library"],function(t){"use strict";function i(){var t=0;for(var i=0;i<this.virtualGridMatrix.length;i++){if(this.virtualGridMatrix[i][0]!==0){t++}}if(t>0){this.addEmptyRows(t)}}function r(t){return t===0}var e=t.extend("sap.f.VirtualGrid");e.prototype.init=function(t){this.virtualGridMatrix=[[]];this.numberOfCols=t.numberOfCols?t.numberOfCols:1;this.numberOfRows=t.numberOfRows?t.numberOfRows:1;this.cellWidth=t.cellWidth?t.cellWidth:5;this.cellHeight=t.cellHeight?t.cellHeight:5;this.unitOfMeasure=t.unitOfMeasure?t.unitOfMeasure:"rem";this.iGapSize=t.gapSize?t.gapSize:1;this.bAllowDenseFill=t.allowDenseFill?t.allowDenseFill:false;this.items={};this.rtl=t.rtl;this.width=t.width;this.topOffset=t.topOffset?t.topOffset:0;this.leftOffset=t.topOffset?t.leftOffset:0;for(var i=0;i<this.numberOfRows;i++){for(var r=0;r<this.numberOfCols;r++){this.virtualGridMatrix[i][r]=0}}this.lastItemPosition={top:-1,left:-1}};e.prototype.addEmptyRows=function(t){var i=this.virtualGridMatrix.length;for(var r=i;r<i+t;r++){this.virtualGridMatrix[r]=Array.apply(null,Array(this.numberOfCols)).map(Number.prototype.valueOf,0)}};e.prototype.getItems=function(){return this.items};e.prototype.getMatrix=function(){return this.virtualGridMatrix};e.prototype.getWidth=function(){if(!this.virtualGridMatrix[0]){return 0}var t=this.virtualGridMatrix[0].length;return t*this.cellWidth+(t-1)*this.iGapSize};e.prototype.getHeight=function(){var t=0;for(var i=0;i<this.virtualGridMatrix.length;i++){if(!this.virtualGridMatrix[i].every(r)){t++}}return t*this.cellHeight+(t-1)*this.iGapSize};e.prototype.calculatePositions=function(){var t,i,r,e,s;for(t=0;t<this.virtualGridMatrix.length;t++){for(i=0;i<this.virtualGridMatrix[t].length;i++){if(!this.virtualGridMatrix[t][i]){continue}if(!this.items[this.virtualGridMatrix[t][i]].calculatedCoords){r=this.items[this.virtualGridMatrix[t][i]];e=i*(this.cellWidth+this.iGapSize)+this.leftOffset;s=r.cols*(this.cellHeight+this.iGapSize)-this.iGapSize;if(this.rtl){e=this.width-e-s}r.top=t*(this.cellHeight+this.iGapSize)+this.topOffset+this.unitOfMeasure;r.left=e+this.unitOfMeasure;r.width=s+this.unitOfMeasure;r.height=r.rows*(this.cellWidth+this.iGapSize)-this.iGapSize+this.unitOfMeasure;r.calculatedCoords=true}}}};e.prototype.fitElement=function(t,r,e,s,l){var a,h=this,o=Math.min(r,this.numberOfCols),f=h.lastItemPosition.top,u=h.lastItemPosition.left;this.items[t]={rows:e,cols:o,calculatedCoords:false};if(e>this.virtualGridMatrix.length){this.addEmptyRows(e-this.virtualGridMatrix.length)}if(s){i.call(this)}this.virtualGridMatrix.forEach(function(i,r,s){i.forEach(function(i,s,l){var n=h.bAllowDenseFill||r>f||r==f&&s>u;if(n&&h.virtualGridMatrix[r][s]===0&&!a){if(h.shouldElementFit(r,s,o,e)){h.fillElement(r,s,o,e,t);a=true}}})});if(!a&&!l){this.fitElement(t,r,e,true,true)}};e.prototype.shouldElementFit=function(t,i,r,e){var s=t+e;var l=i+r;var a=this.virtualGridMatrix;for(var h=t;h<s;h++){for(var o=i;o<l;o++){if(a[h][o]!==0||a.length<s||a[h].length<i+r){return false}}}return true};e.prototype.fillElement=function(t,i,r,e,s){for(var l=t;l<t+e;l++){for(var a=i;a<i+r;a++){this.virtualGridMatrix[l][a]=s}}this.lastItemPosition={top:t,left:i}};return e});