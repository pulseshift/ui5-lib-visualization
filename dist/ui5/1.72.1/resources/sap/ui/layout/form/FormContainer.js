/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/theming/Parameters","sap/ui/layout/library","sap/base/Log"],function(e,t,n,o){"use strict";var i=e.extend("sap.ui.layout.form.FormContainer",{metadata:{library:"sap.ui.layout",properties:{expanded:{type:"boolean",group:"Misc",defaultValue:true},expandable:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"formElements",aggregations:{formElements:{type:"sap.ui.layout.form.FormElement",multiple:true,singularName:"formElement"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},_expandButton:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/FormContainer.designtime"}});i.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.layout")};i.prototype.exit=function(){if(this._oExpandButton){delete this._oExpandButton}this._rb=undefined};i.prototype.setExpandable=function(e){this.setProperty("expandable",e);if(e){if(!this._oExpandButton){if(!this._bExpandButtonRequired){this._bExpandButtonRequired=true;n.form.FormHelper.createButton.call(this,this.getId()+"--Exp",s,r)}}else{a.call(this)}}return this};function r(e){if(!this._bIsBeingDestroyed){this._oExpandButton=e;this.setAggregation("_expandButton",this._oExpandButton);a.call(this)}}i.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);a.call(this);var t=this.getParent();if(t&&t.toggleContainerExpanded){t.toggleContainerExpanded(this)}return this};i.prototype.setToolbar=function(e){e=n.form.FormHelper.setToolbar.call(this,e);this.setAggregation("toolbar",e);return this};i.prototype.contentOnAfterRendering=function(e,t){var n=this.getParent();if(n&&n.contentOnAfterRendering){n.contentOnAfterRendering(e,t)}};i.prototype.onLayoutDataChange=function(e){var t=this.getParent();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};i.prototype._checkProperties=function(){var e=0;if(this.getExpandable()&&(!this.getTitle()||this.getToolbar())){o.warning("Expander only displayed if title is set",this.getId(),"FormContainer");e=1}return e};i.prototype.getRenderedDomRef=function(){var e=this;var t=this.getParent();if(t&&t.getContainerRenderedDomRef){return t.getContainerRenderedDomRef(e)}else{return null}};i.prototype.getElementRenderedDomRef=function(e){var t=this.getParent();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};i.prototype.getVisibleFormElements=function(){var e=this.getFormElements();var t=[];for(var n=0;n<e.length;n++){var o=e[n];if(o.isVisible()){t.push(o)}}return t};i.prototype.invalidateLabels=function(){var e=this.getFormElements();for(var t=0;t<e.length;t++){var n=e[t];n.invalidateLabel()}};i.prototype.isVisible=function(){return this.getVisible()};function a(){if(!this._oExpandButton){return}var e,o,i,r;if(this.getExpanded()){e=t._getThemeImage("_sap_ui_layout_Form_FormContainerColImageURL");o=t._getThemeImage("_sap_ui_layout_Form_FormContainerColImageDownURL");i="-";r=this._rb.getText("FORM_COLLAPSE")}else{e=t._getThemeImage("_sap_ui_layout_Form_FormContainerExpImageURL");o=t._getThemeImage("_sap_ui_layout_Form_FormContainerExpImageDownURL");i="+";r=this._rb.getText("FORM_EXPAND")}if(e){i=""}n.form.FormHelper.setButtonContent(this._oExpandButton,i,r,e,o)}function s(e){this.setExpanded(!this.getExpanded())}return i});