/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./Binding","./Filter","./Sorter"],function(t,e,i){"use strict";var a=t.extend("sap.ui.model.TreeBinding",{constructor:function(a,o,s,r,h,l){t.call(this,a,o,s,h);this.aFilters=[];this.aSorters=n(l,i);this.aApplicationFilters=n(r,e);this.oCombinedFilter=null;this.bDisplayRootNode=h&&h.displayRootNode===true},metadata:{abstract:true,publicMethods:["getRootContexts","getNodeContexts","hasChildren","filter"]}});function n(t,e){if(Array.isArray(t)){return t}return t instanceof e?[t]:[]}a.prototype.getChildCount=function(t){if(!t){return this.getRootContexts().length}return this.getNodeContexts(t).length};a.prototype.attachFilter=function(t,e){this.attachEvent("_filter",t,e)};a.prototype.detachFilter=function(t,e){this.detachEvent("_filter",t,e)};a.prototype._fireFilter=function(t){this.fireEvent("_filter",t)};a.prototype.checkDataState=function(t){var e=this.getDataState(),i=this.oModel?this.oModel.resolve(this.sPath,this.oContext):null,a=this;function n(){a.fireEvent("AggregatedDataStateChange",{dataState:e});e.changed(false);a._sDataStateTimout=null}if(!t||i&&i in t){if(i){e.setModelMessages(this.oModel.getMessagesByPath(i))}if(e&&e.changed()){if(this.mEventRegistry["DataStateChange"]){this.fireEvent("DataStateChange",{dataState:e})}if(this.bIsBeingDestroyed){n()}else if(this.mEventRegistry["AggregatedDataStateChange"]){if(!this._sDataStateTimout){this._sDataStateTimout=setTimeout(n,0)}}}}};a.prototype.getFilterInfo=function(t){if(this.oCombinedFilter){return this.oCombinedFilter.getAST(t)}return null};return a});