/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
(function(e,n){"use strict";var t,i,r,o;t=document.querySelector("[src$='runTest.js']");if(t){i=/^([^?#]*\/)?runTest.js/.exec(t.getAttribute("src"));if(i){r=i[1]+"../../../../"}}if(r==null){throw new Error("runTest.js: could not identify script tag!")}o=/(?:^|\?|&)coverage(?:&|=|$)/.test(window.location.search);function u(e,n){var t=e.length,i=0;if(t===0){n();return}function o(e){t--;if(e.type==="error"){i++}e.target.removeEventListener("load",o);e.target.removeEventListener("error",o);if(t===0&&i===0&&n){n()}}for(var u=0;u<e.length;u++){var s=document.createElement("script");s.addEventListener("load",o);s.addEventListener("error",o);s.src=r+e[u];document.head.appendChild(s)}}window["sap-ui-optimized"]=window["sap-ui-optimized"]||/\.head/.test(u)&&!/pending/.test(u);window["sap-ui-debug-no-reboot"]=true;var s=[];if(/(trident)\/[\w.]+;.*rv:([\w.]+)/i.test(window.navigator.userAgent)){s.push("sap/ui/thirdparty/baseuri.js");s.push("sap/ui/thirdparty/es6-promise.js");s.push("sap/ui/thirdparty/es6-shim-nopromise.js")}else if(/(edge)[ \/]([\w.]+)/i.test(window.navigator.userAgent)||/(Version\/(11\.0)|PhantomJS).*Safari/.test(window.navigator.userAgent)){s.push("sap/ui/thirdparty/es6-promise.js")}u(s,function(){u(["ui5loader.js"],function(){sap.ui.loader.config({async:!o});u(["ui5loader-autoconfig.js"],function(){sap.ui.require(e,n)})})})})(["sap/base/util/UriParameters","sap/ui/test/starter/_utils"],function(e,n){"use strict";function t(e){return Array.isArray(e)?e:[e]}function i(e){return new Promise(function(n,i){sap.ui.require(t(e),function(){n(Array.prototype.slice.call(arguments))},i)})}function r(e,n,t){if(n){for(var i in n){if(Object.prototype.hasOwnProperty.call(t,i)){e[i]=n[i]}}}return e}function o(){function e(e){if(document.body.querySelector("#"+e)==null){var n=document.createElement("div");n.id=e;document.body.insertBefore(n,document.body.firstChild)}}return n.whenDOMReady().then(function(){e("qunit");e("qunit-fixture")})}function u(e){var n=e.sourceFile+":"+e.lineNumber+":"+e.columnNumber,t="Security policy violation: directive '"+e.violatedDirective+"'";if(e.blockedURI){t+=" violated by '"+String(e.blockedURI).slice(0,20)+"'"}if(QUnit.config.current){QUnit.pushFailure(t,n)}else{throw new Error(t+" at "+n)}}var s={altertitle:1,collapse:1,filter:1,fixture:1,hidepassed:1,maxDepth:1,module:1,moduleId:1,notrycatch:1,noglobals:1,seed:1,reorder:1,requireExpects:1,testId:1,testTimeout:1,scrolltop:1};function a(e){var t,a,c,f,l,d,p,h,v,g;document.title=e.title;if(e.loader){sap.ui.loader.config(e.loader)}if(e.runAfterLoader){t=i(e.runAfterLoader)}else{t=Promise.resolve()}if(e.qunit.version==="edge"||e.qunit.version===true){e.qunit.version=2}if(typeof e.qunit.version==="number"){if(e.qunit.version===1){h="sap/ui/thirdparty/qunit";v="sap/ui/thirdparty/qunit.css"}else if(e.qunit.version===2){h="sap/ui/thirdparty/qunit-2";v="sap/ui/thirdparty/qunit-2.css"}else{throw new TypeError("unsupported qunit version "+e.qunit.version)}window.QUnit=window.QUnit||{};QUnit.config=QUnit.config||{};if(e.qunit!=null&&typeof e.qunit==="object"){r(QUnit.config,e.qunit,s)}QUnit.config.autostart=false;a=t.then(function(){n.addStylesheet(v);return i(h)}).then(function(){g=[];QUnit.jUnitDone=function(e){g.push(e)};return i("sap/ui/qunit/qunit-junit")}).then(function(){delete QUnit.jUnitDone;return i("sap/ui/thirdparty/qunit-reporter-junit")}).then(function(){g.forEach(function(e){QUnit.jUnitDone(e)});g=undefined})}if(e.sinon.version==="edge"||e.sinon.version===true){e.sinon.version=4}if(typeof e.sinon.version==="number"){var y,w;if(e.sinon.version===1){y="sap/ui/thirdparty/sinon";w="sap/ui/thirdparty/sinon-qunit"}else if(e.sinon.version===4){y="sap/ui/thirdparty/sinon-4";w="sap/ui/qunit/sinon-qunit-bridge"}else{throw new TypeError("unsupported sinon version "+e.sinon.version)}c=t.then(function(){return i(y)});if(e.sinon.qunitBridge&&a){f=Promise.all([a,c]).then(function(){return i(w)})}if(e.sinon!=null&&typeof e.sinon==="object"){l=Promise.all([c,f]).then(function(){sinon.config=r(sinon.config||{},e.sinon,sinon.defaultConfig);return arguments})}}else if(h){sap.ui.loader.config({shim:{"sap/ui/thirdparty/sinon-qunit":{deps:[h,"sap/ui/thirdparty/sinon"]},"sap/ui/qunit/sinon-qunit-bridge":{deps:[h,"sap/ui/thirdparty/sinon-4"]}}})}d=a.then(function(){if(QUnit.urlParams.coverage){return i("sap/ui/thirdparty/blanket").then(function(){if(e.coverage&&window.blanket){if(e.coverage.only!=null){window.blanket.options("sap-ui-cover-only",e.coverage.only)}if(e.coverage.never!=null){window.blanket.options("sap-ui-cover-never",e.coverage.never)}if(e.coverage.branchTracking){window.blanket.options("branchTracking",true)}}return i("sap/ui/qunit/qunit-coverage")}).then(function(){QUnit.config.autostart=false})}else{return i(["sap/ui/qunit/qunit-coverage"])}}).then(function(){if(QUnit.urlParams["sap-ui-xx-csp-policy"]){document.addEventListener("securitypolicyviolation",u);QUnit.done(function(){document.removeEventListener("securitypolicyviolation",u)})}QUnit.config.urlConfig.push({id:"sap-ui-xx-csp-policy",label:"CSP",value:{"sap-target-level-1:report-only":"Level 1","sap-target-level-2:report-only":"Level 2"},tooltip:"What Content-Security-Policy should the server send"})});p=Promise.all([t,a,c,f,l,d]);if(e.beforeBootstrap){p=p.then(function(){return i(e.beforeBootstrap)})}window["sap-ui-config"]=e.ui5||{};if(Array.isArray(window["sap-ui-config"].libs)){window["sap-ui-config"].libs=window["sap-ui-config"].libs.join(",")}if(e.bootCore){p=p.then(function(){return new Promise(function(e,n){sap.ui.require(["sap/ui/core/Core"],function(n){n.boot();n.attachInit(e)})})})}return p.then(function(){if(e.autostart){return i(e.module).then(function(e){return Promise.all(e)}).then(function(){return o()}).then(function(){if(e.ui5["xx-waitfortheme"]==="init"){return new Promise(function(e,n){sap.ui.require(["sap/ui/qunit/utils/waitForThemeApplied"],e,n)}).then(function(e){return e()})}}).then(function(){QUnit.start()})}else{return o().then(function(){return i(e.module).then(function(e){return Promise.all(e)})})}})}var c=e.fromQuery(window.location.search),f=n.getAttribute("data-sap-ui-testsuite")||c.get("testsuite"),l=n.getAttribute("data-sap-ui-test")||c.get("test");n.getSuiteConfig(f).then(function(e){var n=e.tests[l];if(!n){throw new TypeError("Invalid test name")}return a(n)}).catch(function(e){console.error(e.stack||e);if(typeof QUnit!=="undefined"){QUnit.test("Test Starter",function(){throw e});QUnit.start()}else{n.whenDOMReady().then(function(){document.body.innerHTML="<pre style='color:red;'>"+n.encode(e.stack||e.message||String(e))+"</pre>"})}})});