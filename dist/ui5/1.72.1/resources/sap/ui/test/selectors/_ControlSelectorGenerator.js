/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/test/_OpaLogger","sap/ui/thirdparty/jquery","sap/ui/test/selectors/_ControlSelectorValidator","sap/ui/test/selectors/_selectors"],function(e,t,r,o,a){"use strict";var n=e.extend("sap.ui.test.selectors._ControlSelectorGenerator");var i=t.getLogger("sap.ui.test.selectors._ControlSelectorGenerator");n._generate=function(e){var t=[];var l=new o(t,e.validationRoot);var s=[a.globalID,a.viewID,a.labelFor,a.bindingPath,a.properties,a.dropdownItem,a.tableRowItem];s.forEach(function(t){var o;var a;var s=t._getAncestors(e.control);if(s&&!e.validationRoot){if(s.validation){try{o=n._generate({control:e.control,validationRoot:s.validation})}catch(e){i.debug("Could not generate selector relative to ancestor "+s.validation+". Error: "+e)}}if(s.selector){try{a=n._generate({control:s.selector})}catch(e){i.debug("Could not generate selector for ancestor "+s.selector+". Error: "+e)}}}var c=t.generate(e.control,a,o);if(r.isArray(c)){c.forEach(function(e){if(r.isArray(e)){e.forEach(function(e){l._validate(e)})}else{l._validate(e)}})}else{l._validate(c)}});if(t[0]){i.debug("The top matching unique selector is: "+JSON.stringify(t[0]));return t[0]}else{throw new Error("Could not generate a selector for control "+e.control)}};return n});