/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/m/library","sap/ui/dom/getScrollbarSize"],function(e,t,r){"use strict";var i=t.PlacementType;var o={};o.render=function(e,t){var r;e.write("<div");e.writeControlData(t);r=this.generateRootClasses(t);r.forEach(function(t,r){e.addClass(t)});e.writeClasses();var i=t.getTooltip_AsString();if(i){e.writeAttributeEscaped("title",i)}e.writeAttribute("tabindex","-1");e.writeAccessibilityState(t,t._getAccessibilityOptions());e.write(">");if(t.getResizable()){e.writeIcon("sap-icon://resize-corner",["sapMPopoverResizeHandle"],{title:""})}this.renderContent(e,t);e.write("</div>")};o.isButtonFooter=function(e){if(e instanceof sap.m.Bar){var t=e.getContentLeft(),r=e.getContentRight(),i=e.getContentMiddle(),o=!t||t.length===0,s=!r||r.length===0,a=false;if(i&&i.length===2){if(i[0]instanceof sap.m.Button&&i[1]instanceof sap.m.Button){a=true}}return o&&s&&a}else{return false}};o.renderContent=function(t,i){var o,s=i.getId(),a=0,n=i._getAllContent(),l=i.getFooter(),p=i.getSubHeader(),d=i.getContentWidth(),g=i.getContentMinWidth(),u=i.getContentHeight(),f="sapMPopoverFooter ";if(i.getShowHeader()){o=i._getAnyHeader()}if(e.system.desktop){t.write("<span class='sapMPopoverHiddenFocusable' id='"+i.getId()+"-firstfe' tabindex='0'></span>")}if(o){t.write("<header");t.addClass("sapMPopoverHeader");t.writeClasses();t.write(">");if(o._applyContextClassFor){o._applyContextClassFor("header")}t.renderControl(o);t.write("</header>")}if(p){t.write("<header");t.addClass("sapMPopoverSubHeader");t.writeClasses();t.write(">");if(p._applyContextClassFor){p._applyContextClassFor("subheader")}t.renderControl(p);t.write("</header>")}t.write("<div");t.writeAttribute("id",s+"-cont");if(d){t.addStyle("width",d)}if(g){t.addStyle("min-width",g)}if(u){t.addStyle("height",u)}t.writeStyles();t.addClass("sapMPopoverCont");t.writeClasses();if(sap.ui.getCore().getConfiguration().getAccessibility()&&!sap.ui.getCore().getConfiguration().getAvoidAriaApplicationRole()){t.writeAttribute("role","application")}t.write(">");t.write('<div class="sapMPopoverScroll"');t.writeAttribute("id",i.getId()+"-scroll");if(!i.getHorizontalScrolling()){t.addStyle(sap.ui.getCore().getConfiguration().getRTL()?"margin-left":"margin-right",r().width+"px")}t.writeStyles();t.write(">");for(a=0;a<n.length;a++){t.renderControl(n[a])}t.write("</div>");t.write("</div>");if(l){if(this.isButtonFooter(l)){f+="sapMPopoverSpecialFooter"}t.write("<footer");t.addClass(f);t.writeClasses();t.write(">");if(l._applyContextClassFor){l._applyContextClassFor("footer");l.addStyleClass("sapMTBNoBorders")}t.renderControl(l);t.write("</footer>")}if(i.getShowArrow()){t.write("<span");t.writeAttribute("id",s+"-arrow");t.addClass("sapMPopoverArr");t.writeClasses();t.write("></span>")}if(e.system.desktop){t.write("<span class='sapMPopoverHiddenFocusable' id='"+i.getId()+"-lastfe' tabindex='0'></span>")}};o.generateRootClasses=function(e){var t=["sapMPopover"],r=e.getSubHeader(),o=e.getFooter(),s=e.getVerticalScrolling()&&!e._forceDisableScrolling,a=e.getHorizontalScrolling()&&!e._forceDisableScrolling,n;if(e.getShowHeader()){n=e._getAnyHeader()}if(n){t.push("sapMPopoverWithBar")}else{t.push("sapMPopoverWithoutBar")}if(r){t.push("sapMPopoverWithSubHeader")}else{t.push("sapMPopoverWithoutSubHeader")}if(e._hasSingleNavContent()){t.push("sapMPopoverNav")}if(e._hasSinglePageContent()){t.push("sapMPopoverPage")}if(o){t.push("sapMPopoverWithFooter")}else{t.push("sapMPopoverWithoutFooter")}if(e.getPlacement()===i.Top){t.push("sapMPopoverPlacedTop")}if(!s){t.push("sapMPopoverVerScrollDisabled")}if(!a){t.push("sapMPopoverHorScrollDisabled")}t.push("sapMPopup-CTX");if(e._bSizeCompact){t.push("sapUiSizeCompact")}return t.concat(e.aCustomStyleClasses)};o.rerenderContentOnly=function(e){var t=e.$(),r=e.getDomRef(),i,o;if(!r){return}t.removeClass();i=this.generateRootClasses(e);t.addClass(i.join(" "));o=sap.ui.getCore().createRenderManager();this.renderContent(o,e);o.flush(r,true);o.destroy();e._onOrientationChange()};return o},true);