/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./Button","./Dialog","./Text","./FormattedText","./Link","./VBox","sap/ui/core/IconPool","sap/ui/core/ElementMetadata","sap/ui/core/library","sap/ui/core/Control","sap/m/library","sap/ui/thirdparty/jquery","sap/ui/core/theming/Parameters"],function(t,e,i,n,o,s,a,r,l,c,u,d,f){"use strict";var g=u.DialogType;var O=u.DialogRoleType;var C=l.TextDirection;var I=u.ButtonType;var T={};T.Action={OK:"OK",CANCEL:"CANCEL",YES:"YES",NO:"NO",ABORT:"ABORT",RETRY:"RETRY",IGNORE:"IGNORE",CLOSE:"CLOSE",DELETE:"DELETE"};T.Icon={NONE:undefined,INFORMATION:"INFORMATION",WARNING:"WARNING",ERROR:"ERROR",SUCCESS:"SUCCESS",QUESTION:"QUESTION"};(function(){var l=T.Action,u=T.Icon;var S=function(){if(T._rb!==sap.ui.getCore().getLibraryResourceBundle("sap.m")){T._rb=sap.ui.getCore().getLibraryResourceBundle("sap.m")}};var p=function(t){if(t&&t.actions&&t.actions.length>0){return true}return false};T.show=function(R,E){var N,x,y,A=null,M=[],m,_,h,B,L,b,v,F={id:r.uid("mbox"),initialFocus:null,textDirection:C.Inherit,verticalScrolling:true,horizontalScrolling:true,details:"",contentWidth:null},w=f.get("_sap_m_Message_Box_Information_Icon")==="true",G=w?"message-information":"hint",D={INFORMATION:"sapMMessageBoxInfo",WARNING:"sapMMessageBoxWarning",ERROR:"sapMMessageBoxError",SUCCESS:"sapMMessageBoxSuccess",QUESTION:"sapMMessageBoxQuestion",STANDARD:"sapMMessageBoxStandard"},U={INFORMATION:a.getIconURI(G),WARNING:a.getIconURI("message-warning"),ERROR:a.getIconURI("message-error"),SUCCESS:a.getIconURI("message-success"),QUESTION:a.getIconURI("question-mark")};S();if(typeof E==="string"||arguments.length>2){_=arguments[1];h=arguments[2];B=arguments[3];L=arguments[4];b=arguments[5];v=arguments[6];E={icon:_,title:h,actions:B,onClose:L,id:b,styleClass:v}}if(E&&E.isCustomAction===undefined){E.isCustomAction=p(E)}if(E&&E.hasOwnProperty("details")){F.icon=u.INFORMATION;F.actions=[l.OK,l.CANCEL];E=d.extend({},F,E)}E=d.extend({},F,E);if(typeof E.actions!=="undefined"&&!Array.isArray(E.actions)){E.actions=[E.actions]}if(!E.actions||E.actions.length===0){E.actions=[l.OK];E.isCustomAction=false}function K(e,i){var n;if(T.Action.hasOwnProperty(e)){n=T._rb.getText("MSGBOX_"+e)}var o=new t({id:r.uid("mbox-btn-"),text:n||e,type:i,press:function(){A=e;N.close()}});return o}var W;for(m=0;m<E.actions.length;m++){W=!E.isCustomAction&&l.OK===E.actions[m]?I.Emphasized:I.Default;M.push(K(E.actions[m],W))}function X(t,e){var i,a,r=new s({items:[e]});if(!t.details){return r}if(typeof t.details=="object"){t.details="<pre>"+JSON.stringify(t.details,null,"\t").replace(/{/gi,"\\{")+"</pre>"}i=(new n).setVisible(false).setHtmlText(t.details);a=new o({text:T._rb.getText("MSGBOX_LINK_TITLE"),press:function(){var t=N.getInitialFocus();N.addAriaLabelledBy(i);i.setVisible(true);a.setVisible(false);if(t&&t!==a.getId()){N._setInitialFocus()}else{M[0].focus()}}});a.addStyleClass("sapMMessageBoxLinkText");i.addStyleClass("sapMMessageBoxDetails");r.addItem(a);r.addItem(i);return r}function P(){if(typeof E.onClose==="function"){E.onClose(A)}N.detachAfterClose(P);N.destroy()}function Q(){var t=0;var e=null;if(E.initialFocus){if(E.initialFocus instanceof c){e=E.initialFocus}if(typeof E.initialFocus==="string"){for(t=0;t<M.length;t++){if(T.Action.hasOwnProperty(E.initialFocus)){if(T._rb.getText("MSGBOX_"+E.initialFocus).toLowerCase()===M[t].getText().toLowerCase()){e=M[t];break}}else{if(E.initialFocus.toLowerCase()===M[t].getText().toLowerCase()){e=M[t];break}}}}}return e}if(typeof R==="string"){y=new i({textDirection:E.textDirection}).setText(R).addStyleClass("sapMMsgBoxText");x=y}else if(R instanceof c){y=R.addStyleClass("sapMMsgBoxText")}if(E&&E.hasOwnProperty("details")&&E.details!==""){y=X(E,y)}N=new e({id:E.id,type:g.Message,title:E.title,content:y,icon:U[E.icon],initialFocus:Q(),verticalScrolling:E.verticalScrolling,horizontalScrolling:E.horizontalScrolling,afterClose:P,buttons:M,ariaLabelledBy:x?x.getId():undefined,contentWidth:E.contentWidth,closeOnNavigation:E.closeOnNavigation});N.setProperty("role",O.AlertDialog);if(D[E.icon]){N.addStyleClass(D[E.icon])}else{N.addStyleClass(D.STANDARD)}if(E.styleClass){N.addStyleClass(E.styleClass)}N.open()};T.alert=function(t,e){S();var i={icon:u.NONE,title:T._rb.getText("MSGBOX_TITLE_ALERT"),actions:l.OK,id:r.uid("alert"),initialFocus:null},n,o,s,a;if(typeof e==="function"||arguments.length>2){n=arguments[1];o=arguments[2];s=arguments[3];a=arguments[4];e={onClose:n,title:o,id:s,styleClass:a}}if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)};T.confirm=function(t,e){S();var i={icon:u.QUESTION,title:T._rb.getText("MSGBOX_TITLE_CONFIRM"),actions:[l.OK,l.CANCEL],id:r.uid("confirm"),initialFocus:null},n,o,s,a;if(typeof e==="function"||arguments.length>2){n=arguments[1];o=arguments[2];s=arguments[3];a=arguments[4];e={onClose:n,title:o,id:s,styleClass:a}}if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)};T.error=function(t,e){S();var i={icon:u.ERROR,title:T._rb.getText("MSGBOX_TITLE_ERROR"),actions:[l.CLOSE],id:r.uid("error"),initialFocus:null};if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)};T.information=function(t,e){S();var i={icon:u.INFORMATION,title:T._rb.getText("MSGBOX_TITLE_INFO"),actions:[l.OK],id:r.uid("info"),initialFocus:null};if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)};T.warning=function(t,e){S();var i={icon:u.WARNING,title:T._rb.getText("MSGBOX_TITLE_WARNING"),actions:[l.OK],id:r.uid("warning"),initialFocus:null};if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)};T.success=function(t,e){S();var i={icon:u.SUCCESS,title:T._rb.getText("MSGBOX_TITLE_SUCCESS"),actions:[l.OK],id:r.uid("success"),initialFocus:null};if(e){e.isCustomAction=p(e)}e=d.extend({},i,e);return T.show(t,e)}})();return T},true);