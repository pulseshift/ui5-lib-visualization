/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/core/RenderManager","sap/ui/Device","./NavContainerRenderer","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/dom/jquery/Focusable"],function(t,e,i,a,n,s,o){"use strict";var r=e.extend("sap.m.NavContainer",{metadata:{library:"sap.m",properties:{autoFocus:{type:"boolean",group:"Behavior",defaultValue:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultTransitionName:{type:"string",group:"Appearance",defaultValue:"slide"}},defaultAggregation:"pages",aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"}},associations:{initialPage:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}}}});var d=sap.ui.getCore().getConfiguration().getAnimation(),l=function(t){return d?t:0},g=function(t){return!!(t&&t.getParent())};r.TransitionDirection={BACK:"back",TO:"to"};r.prototype.init=function(){this._pageStack=[];this._aQueue=[];this._mVisitedPages={};this._mFocusObject={};this._iTransitionsCompleted=0;this._bNeverRendered=true;this._bNavigating=false;this._bRenderingInProgress=false};r.prototype.exit=function(){this._mFocusObject=null};r.prototype.onBeforeRendering=function(){var t=this.getCurrentPage();if(this._bNeverRendered&&t){var e=t.getId();if(!this._mVisitedPages[e]){this._mVisitedPages[e]=true;var i={from:null,fromId:null,to:t,toId:e,firstTime:true,isTo:false,isBack:false,isBackToPage:false,isBackToTop:false,direction:"initial"};var a=s.Event("BeforeFirstShow",i);a.srcControl=this;a.data=this._oToDataBeforeRendering||{};a.backData={};t._handleEvent(a);a=s.Event("BeforeShow",i);a.srcControl=this;a.data=this._oToDataBeforeRendering||{};a.backData={};t._handleEvent(a)}}};r.prototype.onAfterRendering=function(){var t=this.getCurrentPage(),e,i,a,n;if(this._bNeverRendered&&t){this._bNeverRendered=false;delete this._bNeverRendered;a=t.getId();if(!this._isInsideAPopup()&&this.getAutoFocus()){e=r._applyAutoFocusTo(a);if(e){this._mFocusObject[a]=e}}i={from:null,fromId:null,to:t,toId:a,firstTime:true,isTo:false,isBack:false,isBackToTop:false,isBackToPage:false,direction:"initial"};n=s.Event("AfterShow",i);n.srcControl=this;n.data=this._oToDataBeforeRendering||{};n.backData={};t._handleEvent(n)}};r.prototype._getActualInitialPage=function(){var t=this.getInitialPage();if(t){var e=sap.ui.getCore().byId(t);if(e){return e}else{o.error("NavContainer: control with ID '"+t+"' was set as 'initialPage' but was not found as a DIRECT child of this NavContainer (number of current children: "+this.getPages().length+").")}}var i=this.getPages();return i.length>0?i[0]:null};r.prototype.getPage=function(t){var e=this.getPages();for(var i=0;i<e.length;i++){if(e[i]&&e[i].getId()==t){return e[i]}}return null};r.prototype._ensurePageStackInitialized=function(t){if(this._pageStack.length===0){var e=this._getActualInitialPage();if(e){this._pageStack.push({id:e.getId(),isInitial:true,data:t||{}})}}return this._pageStack};r.prototype.getCurrentPage=function(){var t=this._ensurePageStackInitialized();if(t.length>=1){return this.getPage(t[t.length-1].id)}else{o.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display");return undefined}};r.prototype.getPreviousPage=function(){var t=this._ensurePageStackInitialized();if(t.length>1){return this.getPage(t[t.length-2].id)}else if(t.length==1){return undefined}else{o.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display")}};r.prototype.currentPageIsTopPage=function(){var t=this._ensurePageStackInitialized();return t.length===1};r.prototype.insertPreviousPage=function(t,e,i){var a=this._ensurePageStackInitialized();if(this._pageStack.length>0){var n=a.length-1;var s={id:t,transition:e,data:i};if(n===0){s.isInitial=true;delete a[a.length-1].isInitial}a.splice(n,0,s)}else{o.warning(this+": insertPreviousPage called with empty page stack; ignoring")}return this};r._applyAutoFocusTo=function(t){var e=s(document.getElementById(t)).firstFocusableDomRef();if(e){e.focus()}return e};r.prototype._applyAutoFocus=function(t){var e=t.toId,i,a=t.isBack||t.isBackToPage||t.isBackToTop;if(!t.bFocusInsideFromPage){return}if(a){i=this._mFocusObject!=null?this._mFocusObject[e]:null;if(i){i.focus()}else{r._applyAutoFocusTo(e)}}else if(t.isTo){r._applyAutoFocusTo(e)}};r.prototype._afterTransitionCallback=function(t,e,i){var a=s.Event("AfterShow",t);a.data=e||{};a.backData=i||{};a.srcControl=this;t.to._handleEvent(a);a=s.Event("AfterHide",t);a.srcControl=this;t.from._handleEvent(a);this._iTransitionsCompleted++;this._bNavigating=false;if(this.getAutoFocus()){this._applyAutoFocus(t)}this.fireAfterNavigate(t);o.info(this+": _afterTransitionCallback called, to: "+t.toId);if(t.to.hasStyleClass("sapMNavItemHidden")){o.warning(this.toString()+": target page '"+t.toId+"' still has CSS class 'sapMNavItemHidden' after transition. This should not be the case, please check the preceding log statements.");t.to.removeStyleClass("sapMNavItemHidden")}this._dequeueNavigation()};r.prototype._dequeueNavigation=function(){var t=this._aQueue.shift();if(typeof t==="function"){t()}};r.prototype._isInPageStack=function(t){return this._pageStack.some(function(e){return e.id===t})};r.prototype._safeBackToPage=function(t,e,i,a){var n;if(!this.getPage(t)){return this}n=this.getCurrentPage();if(n&&n.getId()===t){return this}if(this._isInPageStack(t)){return this.backToPage(t,i,a)}else{i=i||{};i.safeBackToPage=true;return this.to(t,e,i,a)}};r.prototype._isFocusInControl=function(t){return s(document.activeElement).closest(t.$()).length>0};r.prototype.to=function(a,n,d,g,p){if(a instanceof e){a=a.getId()}if(typeof n!=="string"){g=d;d=n}n=n||this.getDefaultTransitionName();g=g||{};d=d||{};var u={id:a,transition:n,data:d};this._ensurePageStackInitialized(d);if(this._bNavigating){o.info(this.toString()+": Cannot navigate to page "+a+" because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(s.proxy(function(){this.to(a,n,d,g,true)},this));return this}if(this._bNeverRendered){this._oToDataBeforeRendering=d}var f=this.getCurrentPage();if(f&&f.getId()===a){o.warning(this.toString()+": Cannot navigate to page "+a+" because this is the current page.");if(p){this._dequeueNavigation()}if(this._pageStack.length===1){this._pageStack[0].transition=u.transition}return this}var h=this.getPage(a);if(h){if(!f){o.warning("Navigation triggered to page with ID '"+a+"', but the current page is not known/aggregated by "+this);return this}var v={from:f,fromId:f.getId(),to:h,toId:a,firstTime:!this._mVisitedPages[a],isTo:true,isBack:false,isBackToTop:false,isBackToPage:false,direction:"to",bFocusInsideFromPage:this._isFocusInControl(f)};if(v.bFocusInsideFromPage){this._mFocusObject[f.getId()]=document.activeElement}var c=this.fireNavigate(v);if(c){t.closeKeyboard();var m=s.Event("BeforeHide",v);m.srcControl=this;f._handleEvent(m);if(!this._mVisitedPages[a]){m=s.Event("BeforeFirstShow",v);m.srcControl=this;m.data=d||{};m.backData={};h._handleEvent(m)}m=s.Event("BeforeShow",v);m.srcControl=this;m.data=d||{};m.backData={};h._handleEvent(m);this._pageStack.push(u);o.info(this.toString()+": navigating to page '"+a+"': "+h.toString());this._mVisitedPages[a]=true;if(!this.getDomRef()){o.info("'Hidden' 'to' navigation in not-rendered NavContainer "+this.toString());if(this._bRenderingInProgress){setTimeout(this.invalidate.bind(this),0)}return this}var y;if(!(y=h.getDomRef())||y.parentNode!=this.getDomRef()||i.isPreservedContent(y)){h.addStyleClass("sapMNavItemRendering");o.debug("Rendering 'to' page '"+h.toString()+"' for 'to' navigation");var b=sap.ui.getCore().createRenderManager();b.render(h,this.getDomRef());b.destroy();h.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}var C=r.transitions[n]||r.transitions["slide"];var I=this._iTransitionsCompleted;var S=this;window.setTimeout(function(){if(S&&S._iTransitionsCompleted<I+1){o.warning("Transition '"+n+"' 'to' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},l(5e3));this._bNavigating=true;var _=d.safeBackToPage||g.safeBackToPage?"back":"to";this._cacheTransitionInfo(n,_);C[_].call(this,f,h,s.proxy(function(){this._afterTransitionCallback(v,d)},this),g)}else{o.info("Navigation to page with ID '"+a+"' has been aborted by the application")}}else{o.warning("Navigation triggered to page with ID '"+a+"', but this page is not known/aggregated by "+this)}return this};r.prototype.back=function(t,e){this._backTo("back",t,e);return this};r.prototype.backToPage=function(t,e,i){this._backTo("backToPage",e,i,t);return this};r.prototype.backToTop=function(t,e){this._backTo("backToTop",t,e);return this};r.prototype._backTo=function(a,n,d,g){if(this._bNavigating){o.warning(this.toString()+": Cannot navigate back because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(s.proxy(function(){this._backTo(a,n,d,g)},this));return this}if(this._pageStack.length<=1){if(this._pageStack.length===1&&!this._pageStack[0].isInitial){throw new Error("Initial page not found on the stack. How did this happen?")}this._aQueue=[];return this}else{if(g instanceof e){g=g.getId()}var p=this._pageStack[this._pageStack.length-1];var u=p.transition;var f=this.getPage(p.id);var h;var v;if(a==="backToTop"){h=this._getActualInitialPage();v=null}else if(a==="backToPage"){var c=this._findClosestPreviousPageInfo(g);if(!c){o.error(this.toString()+": Cannot navigate backToPage('"+g+"') because target page was not found among the previous pages.");return this}h=sap.ui.getCore().byId(c.id);if(!h){o.error(this.toString()+": Cannot navigate backToPage('"+g+"') because target page does not exist anymore.");return this}v=c.data}else{h=this.getPreviousPage();v=this._pageStack[this._pageStack.length-2].data}if(!h){o.error("NavContainer back navigation: target page is not defined or not aggregated by this NavContainer. Aborting navigation.");return}var m=h.getId();n=n||{};d=d||{};var y={from:f,fromId:f.getId(),to:h,toId:m,firstTime:!this._mVisitedPages[m],isTo:false,isBack:a==="back",isBackToPage:a==="backToPage",isBackToTop:a==="backToTop",direction:a,bFocusInsideFromPage:this._isFocusInControl(f)};var b=this.fireNavigate(y);if(b){t.closeKeyboard();var C=s.Event("BeforeHide",y);C.srcControl=this;f._handleEvent(C);if(!this._mVisitedPages[m]){C=s.Event("BeforeFirstShow",y);C.srcControl=this;C.backData=n||{};C.data={};h._handleEvent(C)}C=s.Event("BeforeShow",y);C.srcControl=this;C.backData=n||{};C.data=v||{};h._handleEvent(C);this._pageStack.pop();o.info(this.toString()+": navigating back to page "+h.toString());this._mVisitedPages[m]=true;if(a==="backToTop"){this._pageStack=[];o.info(this.toString()+": navigating back to top");this.getCurrentPage()}else if(a==="backToPage"){var I=[],S;while(this._pageStack[this._pageStack.length-1].id!==g){S=this._pageStack.pop();I.push(S.id)}o.info(this.toString()+": navigating back to specific page "+h.toString()+" across the pages: "+I.join(", "))}if(!this.getDomRef()){o.info("'Hidden' back navigation in not-rendered NavContainer "+this.toString());return this}var _=r.transitions[u]||r.transitions["slide"];var T=this._iTransitionsCompleted;var k=this;window.setTimeout(function(){if(k&&k._iTransitionsCompleted<T+1){o.warning("Transition '"+u+"' 'back' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},l(5e3));this._bNavigating=true;var N;if(!(N=h.getDomRef())||N.parentNode!=this.getDomRef()||i.isPreservedContent(N)){h.addStyleClass("sapMNavItemRendering");o.debug("Rendering 'to' page '"+h.toString()+"' for back navigation");var P=sap.ui.getCore().createRenderManager();var w=this.$().children().index(f.getDomRef());P.renderControl(h);P.flush(this.getDomRef(),false,w);P.destroy();h.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}if(f.getId()===h.getId()){o.info("Transition is skipped when navigating back to the same page instance"+h.toString());this._afterTransitionCallback(y,v,n);return this}this._cacheTransitionInfo(u,r.TransitionDirection.BACK);_.back.call(this,f,h,s.proxy(function(){this._afterTransitionCallback(y,v,n)},this),d)}}return this};r.prototype._findClosestPreviousPageInfo=function(t){for(var e=this._pageStack.length-2;e>=0;e--){var i=this._pageStack[e];if(i.id===t){return i}}return null};r.prototype._cacheTransitionInfo=function(t,e){this._sTransitionName=t;this._sTransitionDirection=e};r.prototype._fadeTransition=function(t,e,i){this.oFromPage=t;this.oToPage=e;this.fCallback=i;this._fadeOutAnimation()};r.prototype._fadeOutAnimation=function(){var t=this,e=this.oFromPage,i=this.oToPage;i.addStyleClass("sapMNavItemTransparent");if(this._sTransitionName==="slide"){if(this._sTransitionDirection===r.TransitionDirection.TO){i.addStyleClass("sapMNavItemSlideLeft");e.addStyleClass("sapMNavItemSlideRight")}else{i.addStyleClass("sapMNavItemSlideRight");e.addStyleClass("sapMNavItemSlideLeft")}}i.removeStyleClass("sapMNavItemHidden");e.addStyleClass("sapMNavItemOpaque");window.setTimeout(function(){e.$().bind("webkitTransitionEnd transitionend",t._fadeOutAnimationEnd.bind(t));t.bTransition1EndPending=true;e.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque").addStyleClass("sapMNavItemTransparent");window.setTimeout(function(){if(t.bTransition1EndPending){t._fadeOutAnimationEnd()}},l(150))},l(10))};r.prototype._fadeOutAnimationEnd=function(t){var e=this.oFromPage;this.bTransition1EndPending=false;if(t&&t.originalEvent&&t.originalEvent.propertyName!=="opacity"){return}s(e.$()).unbind("webkitTransitionEnd transitionend");e.removeStyleClass("sapMNavItemSlideLeft").removeStyleClass("sapMNavItemSlideRight");this._fadeInAnimation()};r.prototype._fadeInAnimation=function(){var t=this,e=this.oToPage;window.setTimeout(function(){e.$().bind("webkitTransitionEnd transitionend",t._fadeInAnimationEnd.bind(t));t.bTransition2EndPending=true;e.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent").addStyleClass("sapMNavItemOpaque");window.setTimeout(function(){if(t.bTransition2EndPending){t._fadeInAnimationEnd()}},l(150))},l(10))};r.prototype._fadeInAnimationEnd=function(t){var e=this.oToPage,i=this.oFromPage;this.bTransition2EndPending=false;if(t&&t.originalEvent&&t.originalEvent.propertyName!=="opacity"){return}if(g(i)){i.addStyleClass("sapMNavItemHidden");i.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent")}s(e.$()).unbind("webkitTransitionEnd transitionend");if(g(e)){e.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque").removeStyleClass("sapMNavItemSlideLeft").removeStyleClass("sapMNavItemSlideRight")}this.fCallback()};r.transitions=r.transitions||{};r.transitions["show"]={to:function(t,e,i){e.removeStyleClass("sapMNavItemHidden");t&&t.addStyleClass("sapMNavItemHidden");i()},back:function(t,e,i){e.removeStyleClass("sapMNavItemHidden");t&&t.addStyleClass("sapMNavItemHidden");i()}};r.transitions["slide"]={to:r.prototype._fadeTransition,back:r.prototype._fadeTransition};r.transitions["fade"]={to:r.prototype._fadeTransition,back:r.prototype._fadeTransition};r.transitions["flip"]={to:function(t,e,i){var a=this;window.setTimeout(function(){a.$().addClass("sapMNavFlip");e.addStyleClass("sapMNavItemFlipNext");e.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{o=false;if(g(e)){e.removeStyleClass("sapMNavItemFlipping")}if(g(t)){t.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipPrevious")}a.$().removeClass("sapMNavFlip");i()}};t.$().bind("webkitTransitionEnd transitionend",r);e.$().bind("webkitTransitionEnd transitionend",r);e.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipNext");t.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipPrevious");window.setTimeout(function(){if(o){n=true;r.apply(t.$().add(e.$()))}},l(600))},l(60))},0)},back:function(t,e,i){var a=this;a.$().addClass("sapMNavFlip");e.addStyleClass("sapMNavItemFlipPrevious");e.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{o=false;if(g(e)){e.removeStyleClass("sapMNavItemFlipping")}if(g(t)){t.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipNext")}a.$().removeClass("sapMNavFlip");i()}};t.$().bind("webkitTransitionEnd transitionend",r);e.$().bind("webkitTransitionEnd transitionend",r);e.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipPrevious");t.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipNext");window.setTimeout(function(){if(o){n=true;r.apply(t.$().add(e.$()))}},l(600))},l(60))}};r.transitions["door"]={to:function(t,e,i){var a=this;window.setTimeout(function(){a.$().addClass("sapMNavDoor");e.addStyleClass("sapMNavItemDoorInNext");e.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitAnimationEnd animationend");if(!n){n=true}else{o=false;if(g(e)){e.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorInNext")}if(g(t)){t.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorInPrevious")}a.$().removeClass("sapMNavDoor");i()}};t.$().bind("webkitAnimationEnd animationend",r);e.$().bind("webkitAnimationEnd animationend",r);e.addStyleClass("sapMNavItemDooring");t.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorInPrevious");window.setTimeout(function(){if(o){n=true;r.apply(t.$().add(e.$()))}},l(1e3))},l(60))},0)},back:function(t,e,i){var a=this;a.$().addClass("sapMNavDoor");e.addStyleClass("sapMNavItemDoorOutNext");e.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitAnimationEnd animationend");if(!n){n=true}else{o=false;if(g(e)){e.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorOutNext")}if(g(t)){t.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorOutPrevious")}a.$().removeClass("sapMNavDoor");i()}};t.$().bind("webkitAnimationEnd animationend",r);e.$().bind("webkitAnimationEnd animationend",r);e.addStyleClass("sapMNavItemDooring");t.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorOutPrevious");window.setTimeout(function(){if(o){n=true;r.apply(t.$().add(e.$()))}},l(1e3))},l(60))}};r.prototype.addCustomTransition=function(t,e,i){if(r.transitions[t]){o.warning("Transition with name "+t+" already exists in "+this+". It is now being replaced by custom transition.")}r.transitions[t]={to:e,back:i};return this};r.addCustomTransition=r.prototype.addCustomTransition;r.prototype.forceInvalidation=r.prototype.invalidate;r.prototype.invalidate=function(t){if(t==this){}else if(!t){this.forceInvalidation()}else if(t instanceof e){var i=false,a=this.getPages(),n=a.length;for(var s=0;s<n;s++){if(a[s]===t){i=true;break}}if((!i||t===this.getCurrentPage())&&!this._isInsideAPopup()){this.forceInvalidation()}}else{this.forceInvalidation()}};r.prototype._isInsideAPopup=function(){var t;t=function(e){if(!e){return false}if(e.getMetadata().isInstanceOf("sap.ui.core.PopupInterface")){return true}return t(e.getParent())};return t(this)};r.prototype.removePage=function(t){var e;if(typeof t=="number"){e=this.getPages()[t]}else if(typeof t=="string"){e=sap.ui.getCore().byId(t)}else{e=t}e=this.removeAggregation("pages",e,e!==this.getCurrentPage());this._onPageRemoved(e);return e};r.prototype._onPageRemoved=function(t){if(!t){return}t.$().remove();t.removeStyleClass("sapMNavItemHidden");t.removeStyleClass("sapMNavItem");var e=this._ensurePageStackInitialized();this._pageStack=e.filter(function(e){return t.getId()!==e.id})};r.prototype.removeAllPages=function(){var t=this.getPages();if(!t){return[]}for(var e=0;e<t.length;e++){this._onPageRemoved(t[e])}return this.removeAllAggregation("pages")};r.prototype.addPage=function(t){var e=this.getPages();if(e.indexOf(t)>-1){return this}this.addAggregation("pages",t,true);t.addStyleClass("sapMNavItem");var i=e.length;if(i===0&&this.getPages().length===1){this._fireAdaptableContentChange(t);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype.insertPage=function(t,e){var i=this.getPages().length;this.insertAggregation("pages",t,e,true);t.addStyleClass("sapMNavItem");if(i===0&&this.getPages().length===1){this._fireAdaptableContentChange(t);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype._getAdaptableContent=function(){return this.getCurrentPage()};r.prototype._fireAdaptableContentChange=function(t){if(t&&this.mEventRegistry["_adaptableContentChange"]){this.fireEvent("_adaptableContentChange",{parent:this,adaptableContent:t})}};return r});