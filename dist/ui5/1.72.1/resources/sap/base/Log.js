/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/now"],function(e){"use strict";var n={};n.Level={NONE:-1,FATAL:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,TRACE:5,ALL:5+1};var o,t=[],i={"":n.Level.ERROR},r=null,s=false;function l(e,n){return("000"+String(e)).slice(-n)}function c(e){return!e||isNaN(i[e])?i[""]:i[e]}function f(){if(!r){r={listeners:[],onLogEntry:function(e){for(var n=0;n<r.listeners.length;n++){if(r.listeners[n].onLogEntry){r.listeners[n].onLogEntry(e)}}},attach:function(e,n){if(n){r.listeners.push(n);if(n.onAttachToLog){n.onAttachToLog(e)}}},detach:function(e,n){for(var o=0;o<r.listeners.length;o++){if(r.listeners[o]===n){if(n.onDetachFromLog){n.onDetachFromLog(e)}r.listeners.splice(o,1);return}}}}}return r}n.fatal=function(e,o,t,i){u(n.Level.FATAL,e,o,t,i)};n.error=function(e,o,t,i){u(n.Level.ERROR,e,o,t,i)};n.warning=function(e,o,t,i){u(n.Level.WARNING,e,o,t,i)};n.info=function(e,o,t,i){u(n.Level.INFO,e,o,t,i)};n.debug=function(e,o,t,i){u(n.Level.DEBUG,e,o,t,i)};n.trace=function(e,o,t,i){u(n.Level.TRACE,e,o,t,i)};n.setLevel=function(e,t,r){t=t||o||"";if(!r||i[t]==null){i[t]=e;var s;Object.keys(n.Level).forEach(function(o){if(n.Level[o]===e){s=o}});u(n.Level.INFO,"Changing log level "+(t?"for '"+t+"' ":"")+"to "+s,"","sap.base.log")}};n.getLevel=function(e){return c(e||o)};n.isLoggable=function(e,t){return(e==null?n.Level.DEBUG:e)<=c(t||o)};n.logSupportInfo=function(e){s=e};function u(i,f,u,a,g){if(!g&&!a&&typeof u==="function"){g=u;u=""}if(!g&&typeof a==="function"){g=a;a=""}a=a||o;if(i<=c(a)){var L=e(),h=new Date(L),v=Math.floor((L-Math.floor(L))*1e3),p={time:l(h.getHours(),2)+":"+l(h.getMinutes(),2)+":"+l(h.getSeconds(),2)+"."+l(h.getMilliseconds(),3)+l(v,3),date:l(h.getFullYear(),4)+"-"+l(h.getMonth()+1,2)+"-"+l(h.getDate(),2),timestamp:L,level:i,message:String(f||""),details:String(u||""),component:String(a||"")};if(s&&typeof g==="function"){p.supportInfo=g()}t.push(p);if(r){r.onLogEntry(p)}if(console){var E=u instanceof Error,R=p.date+" "+p.time+" "+p.message+" - "+p.details+" "+p.component;switch(i){case n.Level.FATAL:case n.Level.ERROR:E?console.error(R,"\n",u):console.error(R);break;case n.Level.WARNING:E?console.warn(R,"\n",u):console.warn(R);break;case n.Level.INFO:if(console.info){E?console.info(R,"\n",u):console.info(R)}else{E?console.log(R,"\n",u):console.log(R)}break;case n.Level.DEBUG:if(console.debug){E?console.debug(R,"\n",u):console.debug(R)}else{E?console.log(R,"\n",u):console.log(R)}break;case n.Level.TRACE:if(console.trace){E?console.trace(R,"\n",u):console.trace(R)}else{E?console.log(R,"\n",u):console.log(R)}break}if(console.info&&p.supportInfo){console.info(p.supportInfo)}}return p}}n.getLogEntries=function(){return t.slice()};n.addLogListener=function(e){f().attach(this,e)};n.removeLogListener=function(e){f().detach(this,e)};function a(e){this.fatal=function(o,t,i,r){n.fatal(o,t,i||e,r);return this};this.error=function(o,t,i,r){n.error(o,t,i||e,r);return this};this.warning=function(o,t,i,r){n.warning(o,t,i||e,r);return this};this.info=function(o,t,i,r){n.info(o,t,i||e,r);return this};this.debug=function(o,t,i,r){n.debug(o,t,i||e,r);return this};this.trace=function(o,t,i,r){n.trace(o,t,i||e,r);return this};this.setLevel=function(o,t){n.setLevel(o,t||e);return this};this.getLevel=function(o){return n.getLevel(o||e)};this.isLoggable=function(o,t){return n.isLoggable(o,t||e)}}n.getLogger=function(e,n){if(!isNaN(n)&&i[e]==null){i[e]=n}return new a(e)};return n});