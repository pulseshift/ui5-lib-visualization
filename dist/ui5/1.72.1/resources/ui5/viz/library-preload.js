//@ui5-bundle ui5/viz/library-preload.js
sap.ui.predefine("ui5/viz/Chart",["sap/ui/core/Control","sap/ui/core/format/DateFormat","./ChartAxis","./ChartAxisLabel","./libs/lodash.debounce","./libs/lodash.isequal","./libs/c3","./library","sap/ui/thirdparty/d3"],function(e,t,i,s,a,r,n,l){return e.extend("ui5.viz.Chart",{metadata:{library:"ui5.viz",properties:{dataVisible:{type:"boolean",group:"Appearance",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"360px"},showSubchart:{type:"boolean",group:"Appearance",defaultValue:false},microMode:{type:"boolean",group:"Appearance",defaultValue:false},zoomEnabled:{type:"boolean",group:"Appearance",defaultValue:false},clipZoomOverflow:{type:"boolean",group:"Appearance",defaultValue:true},showDataPoints:{type:"boolean",group:"Appearance",defaultValue:true},backgroundColor:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:"transparent"},legendPosition:{type:"ui5.viz.ChartLegendPosition",group:"Appearance",defaultValue:l.ChartLegendPosition.Right},showLegend:{type:"boolean",group:"Appearance",defaultValue:false},showTooltip:{type:"boolean",group:"Appearance",defaultValue:false},groupedTooltip:{type:"boolean",group:"Appearance",defaultValue:false},switchAxisPosition:{type:"boolean",group:"Appearance",defaultValue:false},xAxisType:{type:"ui5.viz.AxisType",group:"Data",defaultValue:l.AxisType.Category}},aggregations:{xAxis:{type:"ui5.viz.ChartAxis",multiple:false},yAxis:{type:"ui5.viz.ChartAxis",multiple:false},y2Axis:{type:"ui5.viz.ChartAxis",multiple:false},colors:{type:"ui5.viz.Color",multiple:true},lines:{type:"ui5.viz.ChartLine",multiple:true},areas:{type:"ui5.viz.ChartArea",multiple:true},series:{type:"ui5.viz.ChartSeries",multiple:true}},defaultAggregation:"series",associations:{},events:{chartDataUpdate:{parameters:{}}}},_chart:null,_haltCount:0,_initChartUpdateHandler(){const e=this;e._haltCount=0},_getChartUpdateHandler(){const e=this;return{halt(){++e._haltCount;if(e._haltCount!==0){e.setBusy(true)}},release(){--e._haltCount;if(e._haltCount===0){e.setBusy(false)}},isHalted(){return e._haltCount!==0}}},_seriesNumberCount:0,_initNumberRangeCreator(){const e=this;e._seriesNumberCount=0},_getNumberRangeCreator(){const e=this;return{getNext(){return e._seriesNumberCount++}}},_debounceUpdate:null,_debounceUpdateChartLines:null,_debounceUpdateChartAreas:null,CSS_CLASS:"ui5-viz-chart",CSS_CLASS_NOCLIP:"ui5-viz-chart-noclippath",CSS_HIGHLIGHT_PULSATE:"ui5-viz-chart-point-highlight-pulsate",CSS_CLASS_LINE:"ui5-viz-chart-line",CSS_CLASS_LINE_SHOWSELECTOR:"ui5-viz-chart-line-selector-visible",CSS_CLASS_LINE_ICONONLY:"ui5-viz-chart-line-selector-icononly",CSS_CLASS_AREA:"ui5-viz-chart-area",CSS_CLASS_NO_POINTS:"ui5-viz-chart-hide-data-points",CSS_CLASS_MICRO_MODE:"ui5-viz-chart-micro-mode",init(){this._initNumberRangeCreator();this._initChartUpdateHandler();this._chart=null;this._getChartUpdateHandler().halt();this._debounceUpdate=a(this._onDataUpdate,10);this._debounceUpdateChartLines=a(this._updateChartLines,50);this._debounceUpdateChartAreas=a(this._updateChartAreas,50)},constructor(){e.prototype.constructor.apply(this,arguments);this._getChartUpdateHandler().release()},onBeforeRendering(){this._getChartUpdateHandler().halt();if(this._chart){this._chart.destroy()}},renderer(e,t){e.write("<div");e.writeControlData(t);e.addClass(t.CSS_CLASS);e.writeClasses();e.write(">");e.write("</div>")},onAfterRendering(){if(!this.getDomRef()){return}const e=this.getXAxis();const i=this.getYAxis();const s=this.getY2Axis();const a=this.getSeries();const r=this.getId();let o=[];if(this.getMicroMode()){const t=true;e.setProperty("visible",false,t);i.setProperty("visible",false,t);s.setProperty("visible",false,t)}const h={bindto:`#${r}`,size:{width:this.getWidth(),height:this.getHeigth()-(e.getShowTitle()&&e.getVisible()&&e.getTitle()?15:0)},padding:{top:this.getMicroMode()?0:undefined,bottom:e.getShowTitle()&&e.getVisible()&&e.getTitle()?15:undefined,left:this.getMicroMode()?0:undefined,right:this.getMicroMode()?0:undefined},subchart:{show:this.getShowSubchart()},zoom:{enabled:this.getZoomEnabled()},legend:{position:this.getLegendPosition().toLowerCase(),show:this.getShowLegend()},tooltip:{show:this.getShowTooltip(),grouped:this.getGroupedTooltip(),format:{value:(e,t,i,s)=>{const r=a.find(e=>e.getKey()===i);const n=r?r.getData()[s]:null;const l=n?n.getTooltipLabel():null;const o=n?n.getLabel():null;const h=l||o||e;return h},title:(()=>{switch(this.getXAxisType()){case l.AxisType.Time:return e=>{return t.getInstance({style:"long"}).format(e)};case l.AxisType.Indexed:case l.AxisType.Category:default:return e=>{const t=this.getXAxisLabelByIndex(e);const i=t.getTitle()===""?t.getValue():t.getTitle();return t&&t.getVisible()?i:undefined}}})()}},line:{connectNull:true},data:{x:"x",columns:[["x",...e.getLabels().map((e,t)=>{const i=e.getValue();switch(this.getXAxisType()){case l.AxisType.Time:return/^\d{4}-\d{2}-\d{2}$/.test(i)?i:undefined;case l.AxisType.Indexed:return parseFloat(i)||t;case l.AxisType.Category:default:return i}})],...a.map(e=>{let t=e.getData().map((t,i)=>{let s=t.getVisible();if(s&&t.getHighlightAnimation()!==l.DataPointAnimation.None){o.push({series:e.getKey(),point:i,animation:t.getHighlightAnimation()})}return t.getValueOrValuePair()})||[];t.unshift(e.getKey());return t})],axes:a.length===0?[]:a.reduce((e,t)=>{e[t.getKey()]=t.getYAxis().toLowerCase();return e},{}),types:a.length===0?[]:a.reduce((e,t)=>{e[t.getKey()]=t.getType();return e},{}),names:a.length===0?[]:a.reduce((e,t)=>{e[t.getKey()]=t.getName()||t.getKey();return e},{}),colors:a.length===0?[]:a.reduce((e,t)=>{if(t.getColor()){e[t.getKey()]=t.getColor()}return e},{}),labels:{format:a.length===0?[]:a.reduce((e,t)=>{e[t.getKey()]=(e,i,s)=>{const a=t.getData()[s]?t.getData()[s].getLabel():null;const r=a?a:e;return t.getShowLabels()?r:null};return e},{})},groups:a.length===0?[]:a.reduce((e,t)=>{if(t&&t.getGroupKey()&&!e.includes(t.getGroupKey())){e.push(t.getGroupKey())}return e},[]).map(e=>{return a.filter(t=>t.getGroupKey()===e).map(e=>e.getKey())})},color:{pattern:this.getColors().map(e=>e.getColor()).concat(l.ColorPalette.custom?l.ColorPalette.custom:l.ColorPalette.Material300)},axis:{rotated:this.getSwitchAxisPosition(),x:{show:e.getVisible(),type:(()=>{switch(this.getXAxisType()){case l.AxisType.Time:return"timeseries";case l.AxisType.Indexed:return"indexed";case l.AxisType.Category:default:return"category"}})(),categories:this.getXAxisType()===l.AxisType.Category?e.getLabels().map(e=>e.getValue()):undefined,max:this.getMaxValueByAxis(e),min:this.getMinValueByAxis(e),tick:{centered:false,values:e.getAutoTickValues()===false&&e.getLabels().length>0?e.getLabels().map((e,t)=>{const i=e.getValue();switch(this.getXAxisType()){case l.AxisType.Time:return/^\d{4}-\d{2}-\d{2}$/.test(i)?i:undefined;case l.AxisType.Indexed:return parseFloat(i)||0;case l.AxisType.Category:default:return t}}):undefined,format:(()=>{switch(this.getXAxisType()){case l.AxisType.Time:return e=>{return t.getInstance({pattern:"MMM yyyy"}).format(e)};case l.AxisType.Indexed:case l.AxisType.Category:default:return e=>{const t=this.getXAxisLabelByIndex(e);const i=t.getTitle()===""?t.getValue():t.getTitle();return t&&t.getVisible()?i:undefined}}})()},label:{text:e.getShowTitle()?e.getTitle():null,position:"outer-center"}},y:{show:i.getVisible(),max:this.getMaxValueByAxis(i),min:this.getMinValueByAxis(i),padding:{top:this.getMicroMode()?undefined:0,bottom:this.getMicroMode()?undefined:0},default:[i.getMinValue()||i.getLabels().filter(e=>e.getVisible()).reduce((e,t)=>Math.min(e===undefined?Infinity:e,parseFloat(t.getValue())),undefined),i.getMaxValue()||i.getLabels().filter(e=>e.getVisible()).reduce((e,t)=>Math.max(e===undefined?-Infinity:e,parseFloat(t.getValue())),undefined)],tick:{values:i.getAutoTickValues()===false&&i.getLabels().filter(e=>e.getVisible()).length>0?i.getLabels().filter(e=>e.getVisible()).map(e=>parseFloat(e.getValue())||0):undefined,format:e=>{const t=i.getLabels().filter(e=>e.getVisible()).find(t=>parseFloat(t.getValue())===e);if(!t){return e}const s=t.getTitle()===""?t.getValue():t.getTitle();return t.getVisible()?s:undefined}},label:{text:i.getShowTitle()?i.getTitle():null,position:"outer-middle"}},y2:{show:s.getVisible(),max:this.getMaxValueByAxis(s),min:this.getMinValueByAxis(s),padding:{top:0,bottom:0},default:[s.getMinValue()||s.getLabels().filter(e=>e.getVisible()).reduce((e,t)=>Math.min(e===undefined?Infinity:e,parseFloat(t.getValue())),undefined),s.getMaxValue()||s.getLabels().filter(e=>e.getVisible()).reduce((e,t)=>Math.max(e===undefined?-Infinity:e,parseFloat(t.getValue())),undefined)],tick:{values:s.getAutoTickValues()===false&&s.getLabels().filter(e=>e.getVisible()).length>0?s.getLabels().filter(e=>e.getVisible()).map(e=>parseFloat(e.getValue())||null):undefined,format:e=>{const t=s.getLabels().filter(e=>e.getVisible()).find(t=>parseFloat(t.getValue())===e);if(!t){return e}const i=t.getTitle()===""?t.getValue():t.getTitle();return t.getVisible()?i:undefined}},label:{text:s.getShowTitle()?s.getTitle():null,position:"outer-middle"}}},grid:{x:{show:e.getShowGridLines(),lines:this.getLines().filter(e=>e.getVisible()&&e.getAxis()===l.Axis.X).map(e=>{return this._mapChartLineToC3Line(e)})},y:{show:i.getShowGridLines(),lines:this.getLines().filter(e=>e.getVisible()&&e.getAxis()!==l.Axis.X).map(e=>{return this._mapChartLineToC3Line(e)})}},regions:this.getAreas().filter(e=>e.getVisible()).map(e=>{return{id:e.getId(),start:e.getStartValue(),end:e.getEndValue(),axis:e.getAxis().toLowerCase(),text:e.getTitle(),class:this.CSS_CLASS_AREA+" "+this.CSS_CLASS_AREA+"-"+e.getId()}}),transition:{duration:175}};this._chart=n.generate(h);d3.selectAll(`#${r} g.c3-circles circle.c3-circle`).classed(this.CSS_HIGHLIGHT_PULSATE,false);if(o.length>0){o.forEach(e=>{d3.select(`#${r} g.c3-circles-${e.series} circle.c3-circle-${e.point}`).classed(this.CSS_HIGHLIGHT_PULSATE,true)})}this._updateSeriesStyles();this._updateLineStyles();this._updateAreaStyles();if(this.getClipZoomOverflow()){this.removeStyleClass(this.CSS_CLASS_NOCLIP)}else{this.addStyleClass(this.CSS_CLASS_NOCLIP)}if(this.getDomRef())$(this.getDomRef()).css("background-color",this.getBackgroundColor());$(window).resize(this._resize.bind(this));setTimeout(()=>{this._resize()},150);setTimeout(()=>{this._resize()},1500);this._getChartUpdateHandler().release()},exit(){},setDataVisible(e){if(this._chart)e?this._chart.show():this._chart.hide();return this.setProperty("dataVisible",e,true)},setWidth(e){this.setProperty("width",e,true);this._chart?this._chart.resize({width:this.getWidth()}):undefined;return this},setHeight(e){this.setProperty("height",e,true);this._chart?this._chart.resize({height:this.getHeigth()}):undefined;return this},getWidth(){return this._getComputedSize(this.getProperty("width"),"width")},getHeigth(){return this._getComputedSize(this.getProperty("height"),"height")},setShowSubchart(e){return this.setProperty("showSubchart",e,false)},setMicroMode(e){if(e){this.addStyleClass(this.CSS_CLASS_MICRO_MODE)}else{this.removeStyleClass(this.CSS_CLASS_MICRO_MODE)}return this.setProperty("microMode",e,false)},setZoomEnabled(e){if(this._chart)this._chart.zoom.enable(e);return this.setProperty("zoomEnabled",e,true)},setClipZoomOverflow(e){if(e){this.removeStyleClass(this.CSS_CLASS_NOCLIP)}else{this.addStyleClass(this.CSS_CLASS_NOCLIP)}return this.setProperty("clipZoomOverflow",e,true)},setShowDataPoints(e){if(e){this.removeStyleClass(this.CSS_CLASS_NO_POINTS)}else{this.addStyleClass(this.CSS_CLASS_NO_POINTS)}return this.setProperty("showDataPoints",e,true)},setBackgroundColor(e){if(this.getDomRef())$(this.getDomRef()).css("background-color",e);return this.setProperty("backgroundColor",e,true)},setLegendPosition(e){return this.setProperty("legendPosition",e,false)},setShowLegend(e){if(this._chart)e?this._chart.legend.show():this._chart.legend.hide();return this.setProperty("showLegend",e,true)},setShowTooltip(e){return this.setProperty("showTooltip",e,false)},setGroupedTooltip(e){return this.setProperty("groupedTooltip",e,false)},setSwitchAxisPosition(e){return this.setProperty("switchAxisPosition",e,false)},setXAxisType(e){return this.setProperty("xAxisType",e,false)},getXAxis(){let e;e=this.getAggregation("xAxis");if(!e){e=new i;this.setAggregation("xAxis",e,true)}return e},getYAxis(){let e;e=this.getAggregation("yAxis");if(!e){e=new i;this.setAggregation("yAxis",e,true)}return e},getY2Axis(){let e;e=this.getAggregation("y2Axis");if(!e){e=new i({visible:false});this.setAggregation("y2Axis",e,true)}return e},setAggregation(t,i,s){if(i){switch(t){case"xAxis":i.setProperty("_axisType",l.Axis.X,true);break;case"yAxis":i.setProperty("_axisType",l.Axis.Y,true);break;case"y2Axis":i.setProperty("_axisType",l.Axis.Y2,true);break;default:break}}if(["xAxis","yAxis","y2Axis"].includes(t)){e.prototype.setAggregation.call(this,t,i,false);if(i){i.attachAxisUpdate(e=>this._onDataUpdateByCode(e.getParameter("code")))}}else{e.prototype.setAggregation.call(this,t,i,s)}return this},insertAggregation(t,i,s,a){if(t==="series"&&!i.getKey()){i.setKey(this._getNumberRangeCreator().getNext())}if(["lines","areas"].includes(t)){e.prototype.insertAggregation.call(this,t,i,s,true);switch(t){case"lines":i.attachLineUpdate(e=>this._onDataUpdateByCode(e.getParameter("code")));this._onDataUpdateByCode(l.ChartUpdateCode.Line);break;case"areas":i.attachAreaUpdate(e=>this._onDataUpdateByCode(e.getParameter("code")));this._onDataUpdateByCode(l.ChartUpdateCode.Area);break;default:break}}else{e.prototype.insertAggregation.call(this,t,i,s,a)}return this},addAggregation(t,i,s){if(t==="series"&&!i.getKey()){i.setKey(this._getNumberRangeCreator().getNext())}if(["lines","areas"].includes(t)){e.prototype.addAggregation.call(this,t,i,true);switch(t){case"lines":i.attachLineUpdate(e=>this._onDataUpdateByCode(e.getParameter("code")));this._onDataUpdateByCode(l.ChartUpdateCode.Line);break;case"areas":i.attachAreaUpdate(e=>this._onDataUpdateByCode(e.getParameter("code")));this._onDataUpdateByCode(l.ChartUpdateCode.Area);break;default:break}}else{e.prototype.addAggregation.call(this,t,i,s)}return this},removeAggregation(t,i,s){if(["series","lines","areas"].includes(t)){e.prototype.removeAggregation.call(this,t,i,true);switch(t){case"series":this._onDataUpdateByCode(l.ChartUpdateCode.DataPoint);break;case"lines":this._onDataUpdateByCode(l.ChartUpdateCode.Line);break;case"areas":this._onDataUpdateByCode(l.ChartUpdateCode.Area);break;default:break}}else{e.prototype.removeAggregation.call(this,t,i,s)}return this},removeAllAggregation(t,i){if(["series","lines","areas"].includes(t)){e.prototype.removeAllAggregation.call(this,t,true);switch(t){case"series":this._onDataUpdateByCode(l.ChartUpdateCode.DataPoint);break;case"lines":this._onDataUpdateByCode(l.ChartUpdateCode.Line);break;case"areas":this._onDataUpdateByCode(l.ChartUpdateCode.Area);break;default:break}}else{e.prototype.removeAllAggregation.call(this,t,i)}return this},destroyAggregation(t,i){if(["series","lines","areas"].includes(t)){e.prototype.destroyAggregation.call(this,t,true);switch(t){case"series":this._onDataUpdateByCode(l.ChartUpdateCode.DataPoint);break;case"lines":this._onDataUpdateByCode(l.ChartUpdateCode.Line);break;case"areas":this._onDataUpdateByCode(l.ChartUpdateCode.Area);break;default:break}}else{e.prototype.destroyAggregation.call(this,t,i)}return this},setModel(){this._getChartUpdateHandler().halt();e.prototype.setModel.apply(this,arguments);this._getChartUpdateHandler().release();this._onDataUpdateByCode();return this},getXAxisLabelByIndex(e){const t=this.getXAxis();const i=this.getXAxisType();const a=t.getLabels();const r=i===l.AxisType.Indexed?a.find(t=>parseFloat(t.getValue())===e):a[e];return r||new s({visible:false})},getXAxisIndexByValue(e){const t=this.getXAxis();const i=this.getXAxisType();const s=t.getLabels()||[];const a=s.length;if(i===l.AxisType.Indexed){return parseFloat(e)||null}for(let t=0;t<a;t++){const i=s[t];if(i.getValue()===e){return t}}return null},getMinValueByAxis(e){const t=this.getXAxisType();const i=e.getProperty("_axisType");const s=i===l.Axis.X;const a=e.getMinValue();const r=parseFloat(a);const n=r===0;if(s){switch(t){case l.AxisType.Time:return/^\d{4}-\d{2}-\d{2}$/.test(a)?a:undefined;case l.AxisType.Indexed:case l.AxisType.Category:default:return n?r:r||undefined}}return n?r:r||undefined},getMaxValueByAxis(e){const t=this.getXAxisType();const i=e.getProperty("_axisType");const s=i===l.Axis.X;const a=e.getMaxValue();const r=parseFloat(a);const n=r===0;if(s){switch(t){case l.AxisType.Time:return/^\d{4}-\d{2}-\d{2}$/.test(a)?a:undefined;case l.AxisType.Indexed:case l.AxisType.Category:default:return n?r:r||undefined}}return n?r:r||undefined},_onDataUpdateByCode(e){if(this._getChartUpdateHandler().isHalted()){return}else if(!this.getDomRef()){return}else if(!this._chart){this.rerender();return}switch(e){case l.ChartUpdateCode.Line:this._debounceUpdateChartLines();this.fireChartDataUpdate();break;case l.ChartUpdateCode.Area:this._debounceUpdateChartAreas();this.fireChartDataUpdate();break;default:this._debounceUpdate();this.fireChartDataUpdate();break}},_onDataUpdate(){if(!this.getDomRef()){return}const t=this.getId();const i=this.getSeries();const s=i.map(e=>e.getKey());const a=s.filter(e=>this._chart.data().map(e=>e.id).every(t=>t===e)===false);const r=this._chart.data().map(e=>e.id).filter(e=>s.some(t=>t===e)===false);const n=[];const o=this.getXAxis();const h=this.getYAxis();const d=this.getY2Axis();if(a.length>0||r.length>0){this.rerender();return}e.prototype.setProperty.call(o,"visible",!this.getMicroMode(),true);e.prototype.setProperty.call(h,"visible",!this.getMicroMode(),true);e.prototype.setProperty.call(d,"visible",!this.getMicroMode(),true);this._chart.internal.config.axis_x_tick_values=o.getAutoTickValues()===false&&o.getLabels().length>0?o.getLabels().map((e,t)=>{var i=e.getValue();switch(this.getXAxisType()){case l.AxisType.Time:return/^\d{4}-\d{2}-\d{2}$/.test(i)?i:undefined;case l.AxisType.Indexed:return parseFloat(i)||0;case l.AxisType.Category:default:return t}}):undefined;const g={x:"x",columns:[["x",...o.getLabels().map(e=>e.getValue())],...i.map(e=>[e.getKey(),...e.getData().map((t,i)=>{let s=t.getVisible();if(s&&t.getHighlightAnimation()!==l.DataPointAnimation.None){n.push({series:e.getKey(),point:i,animation:t.getHighlightAnimation()})}return t.getValueOrValuePair()})])],axes:i.length===0?[]:i.reduce((e,t)=>{e[t.getKey()]=t.getYAxis().toLowerCase();return e},{}),types:i.length===0?[]:i.reduce((e,t)=>{e[t.getKey()]=t.getType();return e},{}),names:i.length===0?[]:i.reduce((e,t)=>{e[t.getKey()]=t.getName()||t.getKey();return e},{}),colors:i.length===0?[]:i.reduce((e,t)=>{if(t.getColor()){e[t.getKey()]=t.getColor()}return e},{}),unload:r};this._chart.load(g);d3.selectAll(`#${t} g.c3-circles circle.c3-circle`).classed(this.CSS_HIGHLIGHT_PULSATE,false);if(n.length>0){n.forEach(e=>{d3.select(`#${t} g.c3-circles-${e.series} circle.c3-circle-${e.point}`).classed(this.CSS_HIGHLIGHT_PULSATE,true)})}this._chart.groups(i.length===0?[]:i.reduce((e,t)=>{if(t&&t.getGroupKey()&&!e.includes(t.getGroupKey())){e.push(t.getGroupKey())}return e},[]).map(e=>{return i.filter(t=>t.getGroupKey()===e).map(e=>e.getKey())}));this._updateSeriesStyles();this._chart.axis.labels({x:o.getShowTitle()?o.getTitle():null,y:h.getShowTitle()?h.getTitle():null,y2:d.getShowTitle()?d.getTitle():null});this._chart.axis.showX(o.getVisible());this._chart.axis.showY(h.getVisible());this._chart.axis.showY2(d.getVisible());this._chart.axis.range({min:{X:this.getMinValueByAxis(o),y:this.getMinValueByAxis(h),y2:this.getMinValueByAxis(d)},max:{x:this.getMaxValueByAxis(o),y:this.getMaxValueByAxis(h),y2:this.getMaxValueByAxis(d)}});this.fireChartDataUpdate()},_updateChartLines(){const e=[].concat(this._chart.xgrids());const t=[].concat(this._chart.ygrids());const i=this.getLines().filter(e=>e.getVisible()&&e.getAxis()===l.Axis.X).map(e=>this._mapChartLineToC3Line(e));const s=this.getLines().filter(e=>e.getVisible()&&e.getAxis()!==l.Axis.X).map(e=>this._mapChartLineToC3Line(e));const a=i.filter(t=>{const i=e.find(e=>e.id===t.id);return i&&r(t,i)===false});if(a.length>0){this._chart.xgrids(i)}else{e.filter(e=>i.every(t=>t.id!==e.id)).forEach(e=>{this._chart.xgrids.remove({class:e.class})});const t=i.filter(t=>e.every(e=>e.id!==t.id));if(t.length>0){this._chart.xgrids.add(t)}}const n=s.filter(e=>{const i=t.find(t=>t.id===e.id);return i&&r(e,i)===false});if(n.length>0){this._chart.ygrids(s)}else{t.filter(e=>s.every(t=>t.id!==e.id)).forEach(e=>{this._chart.ygrids.remove({class:e.class})});const e=s.filter(e=>t.every(t=>t.id!==e.id));if(e.length>0){this._chart.ygrids.add(e)}}this._updateLineStyles()},_updateChartAreas(){const e=this._chart.regions()||[];const t=Array.isArray(e)?e:[e];const i=this.getAreas().filter(e=>e.getVisible()).map(e=>{return{id:e.getId(),start:e.getStartValue(),end:e.getEndValue(),axis:e.getAxis().toLowerCase(),text:e.getTitle(),class:`${this.CSS_CLASS_AREA} ${this.CSS_CLASS_AREA}-${e.getId()}`}});const s=t.filter(e=>i.every(t=>t.id!==e.id)).map(e=>`${this.CSS_CLASS_AREA}-${e.id}`);if(s.length>0){this._chart.regions.remove({classes:s})}const a=i.filter(e=>t.every(t=>t.id!==e.id));if(a.length>0){this._chart.regions.add(a)}const n=i.filter(e=>{const i=t.find(t=>t.id===e.id);return i&&r(e,i)===false});if(n.length>0){this._chart.regions(n)}this._updateAreaStyles()},_mapChartLineToC3Line(e){const t=e.getShowLineSelector()?this.CSS_CLASS_LINE_SHOWSELECTOR:"";const i=e.getSelectorIconOnly()?this.CSS_CLASS_LINE_ICONONLY:"";return{id:e.getId(),value:e.getValue(),axis:e.getAxis().toLowerCase(),text:e.getTitle(),position:e.getTitlePosition().toLowerCase(),showSelector:e.getShowLineSelector()?true:false,class:`${this.CSS_CLASS_LINE} ${this.CSS_CLASS_LINE}-${e.getStyle()} ${this.CSS_CLASS_LINE}-${e.getId()} ${t} ${i}`}},_onSeriesVisibilityUpdate(e){let t=e.getParameter("chartSeries");if(t.getVisible()){this._chart.show(t.getKey(),{withLegend:true})}else{this._chart.hide(t.getKey(),{withLegend:true})}},_updateSeriesStyles(){const e=this.getId();this.getSeries().forEach(t=>{const i=t.getKey();let s,a,r,n=this._isShapeType(t.getType())?t.getShapeStyle():l.ShapeStyle.Solid;switch(n){case l.ShapeStyle.Striped:a=this._chart.data.colors()[t.getKey()];r=d3.select(`#${e} defs #${e}-stripe-pattern-${i}`);if(r.empty()){r=d3.select(`#${e} defs`).append("pattern").attr({id:`${e}-stripe-pattern-${i}`,width:"8",height:"8",patternUnits:"userSpaceOnUse",class:`stripe-pattern-${i}`}).append("path").attr({d:"M1,0L5,0L0,5L0,1L1,0 M8,1L8,5L5,8L1,8L8,1"})}s=d3.select(`#${e} defs #${e}-stripe-style-${i}`);if(s.empty()){s=d3.select(`#${e} defs`).append("style").attr({id:`${e}-stripe-style-${i}`,type:"text/css"})}s.text(`#${e} .stripe-pattern-${i} path {\n                fill: ${a};\n                stroke: none;\n              }\n              #${e} .c3-target-${i} .c3-shape {\n                fill: url(#${e}-stripe-pattern-${i}) !important;\n              }`);break;case l.ShapeStyle.Solid:default:s=d3.select(`#${e} defs #${e}-stripe-style-${i}`);if(!s.empty()){s.text("")}break}});this.getSeries().forEach(t=>{const i=t.getKey();let s,a,r=this._isLineType(t.getType())?t.getLineStyle():l.LineStyle.Solid,n;switch(t.getLineAnimationSpeed()){case l.AnimationSpeed.Fast:n=20;break;case l.AnimationSpeed.Medium:n=50;break;case l.AnimationSpeed.Slow:n=150;break;case l.AnimationSpeed.None:default:n=0;break}switch(r){case l.LineStyle.Dashed:case l.LineStyle.Dotted:a=t.getLineStyle()===l.LineStyle.Dotted?"1 5":"5";s=d3.select(`#${e} defs #${e}-dashdot-style-${i}`);if(s.empty()){s=d3.select(`#${e} defs`).append("style").attr({id:`${e}-dashdot-style-${i}`,type:"text/css"})}s.text(`#${e} .c3-target-${i} path.c3-shape {\n                                    stroke-dashoffset: ${t.getLineAnimationForwards()?"":"-"}50rem;\n                                    stroke-dasharray: ${a};\n                                    stroke-linecap: round;\n\n                                    -webkit-animation: ui5-viz-chart-dash-animation ${n}s 0s linear infinite forwards;\n                                    -moz-animation: ui5-viz-chart-dash-animation ${n}s 0s linear infinite forwards;\n                                    -ms-animation: ui5-viz-chart-dash-animation ${n}s 0s linear infinite forwards;\n                                    -o-animation: ui5-viz-chart-dash-animation ${n}s 0s linear infinite forwards;\n                                    animation: ui5-viz-chart-dash-animation ${n}s 0s linear infinite forwards;\n                                }`);break;case l.LineStyle.Solid:default:s=d3.select(`#${e} defs #${e}-dashdot-style-${i}`);if(!s.empty()){s.text("")}break}})},_updateLineStyles(){const e=this.getId();let t="",i=d3.select(`#${e} defs #${e}-line-style`);if(i.empty()){i=d3.select(`#${e} defs`).append("style").attr({id:`${e}-line-style`,type:"text/css"})}this.getLines().forEach(i=>{const s=i.getId();const a=i.getColor();const r=i.getStyle();const n=`#${e} .${this.CSS_CLASS_LINE}-${s}`;const o=`${e}-${s}`;let h;let d;if(a){t+=`${n} line {\n                stroke: ${a};\n            }\n\n            ${n} circle {\n                stroke: ${a};\n            }\n\n            ${n} text {\n                fill: ${a};\n            }`}switch(r){case l.LineStyle.Dashed:case l.LineStyle.Dotted:d=r===l.LineStyle.Dotted?"1 5":"5";h=d3.select(`#${e} defs #${o}`);if(h.empty()){h=d3.select(`#${e} defs`).append("style").attr({id:`${o}`,type:"text/css"})}h.text(`${n} line {\n                    stroke-dasharray: ${d};\n                    stroke-linecap: round;\n                }`);break;case l.LineStyle.Solid:default:h=d3.select(`#${e} defs #${o}`);if(!h.empty()){h.text("")}break}let g=d3.select(n),c=sap.ui.core.IconPool.getIconInfo(i.getLineSelectorIcon());if(i.getShowLineSelector()){g.select(".c3-grid-lines-circle-text").attr("font-family",c.fontFamily).text(c.content);g.select(".c3-grid-lines-circle-hover").on("click",function(){i.fireSelectorPress({line:i,selectorDomRef:this.previousSibling})})}else{g.select(".c3-grid-lines-circle-hover").on("click",function(){})}});i.text(t)},_updateAreaStyles(){const e=this.getId();let t="",i=d3.select(`#${e} defs #${e}-area-style`);if(i.empty()){i=d3.select(`#${e} defs`).append("style").attr({id:`${e}-area-style`,type:"text/css"})}this.getAreas().forEach(i=>{const s=i.getId();const a=i.getColor()||"#000000";const r=i.getStyle();let n;switch(r){case l.ShapeStyle.Striped:n=d3.select(`#${e} defs #${e}-area-stripe-pattern-${s}`);if(n.empty()){n=d3.select(`#${e} defs`).append("pattern").attr({id:`${e}-area-stripe-pattern-${s}`,width:"8",height:"8",patternUnits:"userSpaceOnUse",class:`area-stripe-pattern-${s}`}).append("path").attr({d:"M1,0L5,0L0,5L0,1L1,0 M8,1L8,5L5,8L1,8L8,1"})}t+=`#${e} .area-stripe-pattern-${s} path {\n                                    fill: ${a};\n                                    stroke: none;\n                                }\n                                #${e} .${this.CSS_CLASS_AREA}-${s} rect.c3-region-stripe,\n                                #${e} .${this.CSS_CLASS_AREA}-${s} text.c3-region-text {\n                                    fill: ${a};\n                                }\n                                #${e} .${this.CSS_CLASS_AREA}-${s} rect.c3-region-area {\n                                    fill: url(#${e}-area-stripe-pattern-${s}) !important;\n                                }`;break;case l.ShapeStyle.Solid:default:t+=`#${e} .${this.CSS_CLASS_AREA}-${s} rect.c3-region-stripe,\n                                #${e} .${this.CSS_CLASS_AREA}-${s} text.c3-region-text {\n                                    fill: ${a};\n                                }\n                                #${e} .${this.CSS_CLASS_AREA}-${s} rect.c3-region-area {\n                                    fill: ${a};\n                                }`;break}});i.text(t)},_isShapeType(e){let t=false;switch(e){case l.ChartSeriesType.Bar:t=true;break;default:t=false;break}return t},_isLineType(e){let t=false;switch(e){case l.ChartSeriesType.Line:case l.ChartSeriesType.Spline:case l.ChartSeriesType.Step:case l.ChartSeriesType.AreaLine:case l.ChartSeriesType.AreaSpline:case l.ChartSeriesType.AreaStep:case l.ChartSeriesType.RibbonLine:case l.ChartSeriesType.RibbonSpline:case l.ChartSeriesType.RibbonStep:t=true;break;default:t=false;break}return t},_isRibbonType(e){return e===(l.ChartSeriesType.RibbonLine||l.ChartSeriesType.RibbonSpline||l.ChartSeriesType.RibbonStep)},_getAvailableSize(e){var t=0;e=e==="width"||e==="height"?e:"width";if(this.getDomRef()){if(e==="width"){t+=parseInt(getComputedStyle(this.getDomRef(),"").marginLeft.match(/(\d*(\.\d*)?)/,10)[1])||0;t+=parseInt(getComputedStyle(this.getDomRef(),"").marginRight.match(/(\d*(\.\d*)?)/,10)[1])||0}else{t+=parseInt(getComputedStyle(this.getDomRef(),"").marginTop.match(/(\d*(\.\d*)?)/,10)[1])||0;t+=parseInt(getComputedStyle(this.getDomRef(),"").marginBottom.match(/(\d*(\.\d*)?)/,10)[1])||0}}return $(this._getParentDomRef())[e]()-t},_getComputedSize(e,t){e=e||"auto";t=t==="width"||t==="height"?t:"width";var i=l.parseCSSSize(e),s=1,a;switch(i.unit){case"rem":a=i.value*parseInt(getComputedStyle(document.body,"").fontSize.match(/(\d*(\.\d*)?)/,10)[1])||0;break;case"em":a=i.value*parseInt(getComputedStyle(this._getParentDomRef(),"").fontSize.match(/(\d*(\.\d*)?)/,10)[1])||0;break;case"px":a=i.value&&i.value>0?i.value:this._getAvailableSize(t);break;case"vw":s=(i.value&&i.value>0?i.value:100)/100;a=this._getAvailableSize("width")*s;break;case"vh":s=(i.value&&i.value>0?i.value:100)/100;a=this._getAvailableSize("height")*s;break;case"%":s=(i.value&&i.value>0?i.value:100)/100;a=this._getAvailableSize(t)*s;break;case"initial":case"inherit":case"auto":a=this._getAvailableSize(t);break;default:jQuery.sap.log.warning("CSS unit "+i.unit+' is not supported, yet. Fallback to "auto" (max. width).');a=this._getAvailableSize(t)}return a},_resize(){if(this._chart){this._chart.resize({width:this.getWidth(),height:this.getHeigth()})}return this},_getParentDomRef(){var e=this.getDomRef()?this.getDomRef().parentNode:document.body;return e?e:document.body}})},true);
sap.ui.predefine("ui5/viz/ChartArea",["sap/ui/core/Element","./library"],function(e,t){return e.extend("ui5.viz.ChartArea",{metadata:{library:"ui5.viz",properties:{title:{type:"string",group:"Appereance",defaultValue:null},style:{type:"ui5.viz.ShapeStyle",group:"Appearance",defaultValue:t.ShapeStyle.Solid},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null},axis:{type:"ui5.viz.Axis",group:"Appearance",defaultValue:t.Axis.X},visible:{type:"boolean",group:"Appereance",defaultValue:true},startValue:{type:"string",group:"Data",defaultValue:null},endValue:{type:"string",group:"Data",defaultValue:null}},aggregations:{},associations:{},events:{areaUpdate:{parameters:{code:{type:"ui5.viz.ChartUpdateCode"}}}}},init(){},constructor(){e.prototype.constructor.apply(this,arguments)},exit(){this.fireAreaUpdate({code:t.ChartUpdateCode.Area})},getStartValue(){const e=this.getProperty("startValue");const r=this.getProperty("axis");if(r===t.Axis.X){const r=this.getParent();const a=r.getXAxisType()===t.AxisType.Time;return a?e:r.getXAxisIndexByValue(e)}return e},getEndValue(){const e=this.getProperty("endValue");const r=this.getProperty("axis");if(r===t.Axis.X){const r=this.getParent();const a=r.getXAxisType()===t.AxisType.Time;return a?e:r.getXAxisIndexByValue(e)}return e},setProperty(r,a,i){if(["style","color","axis","title","startValue","endValue","visible"].includes(r)){e.prototype.setProperty.call(this,r,a,true);this.fireAreaUpdate({code:t.ChartUpdateCode.Area})}else{e.prototype.setProperty.call(this,r,a,i)}return this}})},true);
sap.ui.predefine("ui5/viz/ChartAxis",["sap/ui/core/Element","./library"],function(e,t){return e.extend("ui5.viz.ChartAxis",{metadata:{library:"ui5.viz",properties:{title:{type:"string",group:"Appereance",defaultValue:null},showTitle:{type:"boolean",group:"Appereance",defaultValue:true},showGridLines:{type:"boolean",group:"Appereance",defaultValue:false},minValue:{type:"string",group:"Appereance",defaultValue:null},maxValue:{type:"string",group:"Appereance",defaultValue:null},autoTickValues:{type:"boolean",group:"Appereance",defaultValue:false},visible:{type:"boolean",group:"Appereance",defaultValue:true},_axisType:{type:"ui5.viz.Axis",group:"Data",hidden:true,defaultValue:t.Axis.X}},aggregations:{labels:{type:"ui5.viz.ChartAxisLabel",multiple:true}},defaultAggregation:"labels",associations:{},events:{axisUpdate:{}}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){},exit(){this.fireAxisUpdate()},insertAggregation(i,r,a,s){if(i==="labels"&&this.getProperty("_axisType")===t.Axis.X){e.prototype.insertAggregation.call(this,i,r,true);r.attachAxisLabelUpdate(this.fireAxisUpdate.bind(this));this.fireAxisUpdate()}else{e.prototype.insertAggregation.call(this,i,r,a,s)}return this},addAggregation(i,r,a){if(i==="labels"&&this.getProperty("_axisType")===t.Axis.X){e.prototype.addAggregation.call(this,i,r,true);r.attachAxisLabelUpdate(this.fireAxisUpdate.bind(this));this.fireAxisUpdate()}else{e.prototype.addAggregation.call(this,i,r,a)}return this},removeAggregation(i,r,a){if(i==="labels"&&this.getProperty("_axisType")===t.Axis.X){e.prototype.removeAggregation.call(this,i,r,true);r.attachAxisLabelUpdate(this.fireAxisUpdate.bind(this));this.fireAxisUpdate()}else{e.prototype.removeAggregation.call(this,i,r,a)}return this},removeAllAggregation(i,r){if(i==="labels"&&this.getProperty("_axisType")===t.Axis.X){e.prototype.removeAllAggregation.call(this,i,true);this.fireAxisUpdate()}else{e.prototype.removeAllAggregation.call(this,i,r)}return this},destroyAggregation(i,r){if(i==="labels"&&this.getProperty("_axisType")===t.Axis.X){e.prototype.destroyAggregation.call(this,i,true);this.fireAxisUpdate()}else{e.prototype.destroyAggregation.call(this,i,r)}return this},setProperty(t,i,r){if(["title","showTitle","visible"].includes(t)){e.prototype.setProperty.call(this,t,i,true);this.fireAxisUpdate()}else{e.prototype.setProperty.call(this,t,i,r)}return this}})},true);
sap.ui.predefine("ui5/viz/ChartAxisLabel",["sap/ui/core/Element"],function(e){return e.extend("ui5.viz.ChartAxisLabel",{metadata:{library:"ui5.viz",properties:{value:{type:"any",group:"Appereance",defaultValue:null},title:{type:"string",group:"Appereance",defaultValue:null},visible:{type:"boolean",group:"Appereance",defaultValue:true}},aggregations:{},associations:{},events:{axisLabelUpdate:{}}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){},exit(){this.fireAxisLabelUpdate()},setProperty(t,i,r){if(t==="value"&&i!==null&&i!==undefined){i=i.toString()}if(["value","title","visible"].includes(t)){e.prototype.setProperty.call(this,t,i,true);this.fireAxisLabelUpdate()}else{e.prototype.setProperty.call(this,t,i,r)}return this}})},true);
sap.ui.predefine("ui5/viz/ChartDataPoint",["sap/ui/core/Element","./library"],function(e,t){return e.extend("ui5.viz.ChartDataPoint",{metadata:{library:"ui5.viz",properties:{highlightAnimation:{type:"ui5.viz.DataPointAnimation",group:"Appearance",defaultValue:t.DataPointAnimation.None},type:{type:"ui5.viz.DataPointType",group:"Appearance",defaultValue:t.DataPointType.SingleValue},label:{type:"string",group:"Data",defaultValue:null},tooltipLabel:{type:"string",group:"Data",defaultValue:null},value:{type:"any",group:"Data",defaultValue:null},high:{type:"any",group:"Data",defaultValue:null},low:{type:"any",group:"Data",defaultValue:null},visible:{type:"boolean",group:"Appereance",defaultValue:true}},aggregations:{},associations:{},events:{dataPointUpdate:{}}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){},exit(){this.fireDataPointUpdate()},setProperty(t,a,i){if(["value","high","low","label","tooltipLabel","visible","highlightAnimation"].includes(t)){e.prototype.setProperty.call(this,t,a,true);this.fireDataPointUpdate()}else{e.prototype.setProperty.call(this,t,a,i)}return this},getVisible(){if(this.getType()===t.DataPointType.SingleValue){var e=this.getValue();return this.getProperty("visible")&&e!=="null"&&e!=="undefined"&&e!==null&&e!==undefined}else{var a=this.getHigh();var i=this.getLow();return this.getProperty("visible")&&a!=="null"&&a!=="undefined"&&a!==null&&a!==undefined&&i!=="null"&&i!=="undefined"&&i!==null&&i!==undefined}},getValue(){var e=this.getProperty("value");return!isNaN(e)&&e!==null?parseFloat(e):null},getHigh(){var e=this.getProperty("high");return!isNaN(e)&&e!==null?parseFloat(e):null},getLow(){var e=this.getProperty("low");return!isNaN(e)&&e!==null?parseFloat(e):null},getValueOrValuePair(){const e=this.getVisible();if(this.getType()===t.DataPointType.SingleValue){return e?this.getValue():null}else{var a=this.getHigh();var i=this.getLow();var l={high:a,low:i};return e?l:{high:null,low:null}}}})});
sap.ui.predefine("ui5/viz/ChartLine",["sap/ui/core/Element","./library"],function(e,t){"use strict";return e.extend("ui5.viz.ChartLine",{metadata:{library:"ui5.viz",properties:{title:{type:"string",group:"Appereance",defaultValue:null},titlePosition:{type:"ui5.viz.ChartTitlePosition",group:"Appereance",defaultValue:t.ChartTitlePosition.Start},style:{type:"ui5.viz.LineStyle",group:"Appearance",defaultValue:t.LineStyle.Solid},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null},axis:{type:"ui5.viz.Axis",group:"Appearance",defaultValue:t.Axis.Y},showLineSelector:{type:"boolean",group:"Appearance",defaultValue:false},selectorIconOnly:{type:"boolean",group:"Appearance",defaultValue:false},lineSelectorIcon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:"sap-icon://flag"},visible:{type:"boolean",group:"Appereance",defaultValue:true},value:{type:"string",group:"Data",defaultValue:null}},aggregations:{},associations:{},events:{lineUpdate:{parameters:{code:{type:"ui5.viz.ChartUpdateCode"}}},selectorPress:{parameters:{line:{type:"ui5.viz.ChartLine"},selectorDomRef:{type:"object"}}}}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){},exit(){this.fireLineUpdate({code:t.ChartUpdateCode.Line})},setProperty(a,i,r){if(["title","titlePosition","style","color","axis","value","visible"].includes(a)){e.prototype.setProperty.call(this,a,i,true);this.fireLineUpdate({code:t.ChartUpdateCode.Line})}else{e.prototype.setProperty.call(this,a,i,r)}return this}})},true);
sap.ui.predefine("ui5/viz/ChartSeries",["sap/ui/core/Element","./library"],function(e,t){return e.extend("ui5.viz.ChartSeries",{metadata:{library:"ui5.viz",properties:{type:{type:"ui5.viz.ChartSeriesType",group:"Appearance",defaultValue:t.ChartSeriesType.Spline},name:{type:"string",group:"Appearance",defaultValue:null},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null},showLabels:{type:"boolean",group:"Appearance",defaultValue:false},lineStyle:{type:"ui5.viz.LineStyle",group:"Appearance",defaultValue:t.LineStyle.Solid},shapeStyle:{type:"ui5.viz.ShapeStyle",group:"Appearance",defaultValue:t.ShapeStyle.Solid},lineAnimationSpeed:{type:"ui5.viz.AnimationSpeed",group:"Appearance",defaultValue:t.AnimationSpeed.None},lineAnimationForwards:{type:"boolean",group:"Appearance",defaultValue:true},groupKey:{type:"string",group:"Appearance",defaultValue:null},yAxis:{type:"ui5.viz.Axis",group:"Appearance",defaultValue:t.Axis.Y},visible:{type:"boolean",group:"Appereance",defaultValue:true},key:{type:"string",group:"Data",defaultValue:null}},aggregations:{data:{type:"ui5.viz.ChartDataPoint",multiple:true}},defaultAggregation:"data",associations:{},events:{seriesDataUpdate:{parameters:{code:{type:"ui5.viz.ChartUpdateCode"}}},seriesVisibilityChange:{parameters:{chartSeries:{type:"ui5.viz.ChartSeries"}}}}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){},exit(){this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})},getKey(){const e=this.getProperty("key");return t.toValidHtmlID(e)},insertAggregation(a,i,r,o){if(a==="data"){e.prototype.insertAggregation.call(this,a,i,true);i.attachDataPointUpdate(()=>{this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})});this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})}else{e.prototype.insertAggregation.call(this,a,i,r,o)}return this},addAggregation(a,i,r){if(a==="data"){e.prototype.addAggregation.call(this,a,i,true);i.attachDataPointUpdate(()=>{this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})});this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})}else{e.prototype.addAggregation.call(this,a,i,r)}return this},removeAggregation(a,i,r){if(a==="data"){e.prototype.removeAggregation.call(this,a,i,true);i.attachDataPointUpdate(()=>{this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})});this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})}else{e.prototype.removeAggregation.call(this,a,i,r)}return this},removeAllAggregation(a,i){if(a==="data"){e.prototype.removeAllAggregation.call(this,a,true);this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})}else{e.prototype.removeAllAggregation.call(this,a,i)}return this},destroyAggregation(a,i){if(a==="data"){e.prototype.destroyAggregation.call(this,a,true);this.fireSeriesDataUpdate({code:t.ChartUpdateCode.DataPoint})}else{e.prototype.destroyAggregation.call(this,a,i)}return this},setProperty(t,a,i){if(["type","name","color","showLabels","groupKey","visible","yAxis","lineStyle","shapeStyle","lineAnimationSpeed","lineAnimationForwards"].includes(t)){e.prototype.setProperty.call(this,t,a,true);this.fireSeriesDataUpdate()}else if(t==="visible"){e.prototype.setProperty.call(this,t,a,true);this.fireSeriesVisibilityChange({chartSeries:this})}else{e.prototype.setProperty.call(this,t,a,i)}return this}})},true);
sap.ui.predefine("ui5/viz/Color",["sap/ui/core/Element","./library"],function(e){return e.extend("ui5.viz.Color",{metadata:{library:"ui5.viz",properties:{color:{type:"sap.ui.core.CSSColor",group:"Appereance",defaultValue:null}},aggregations:{},associations:{},events:{}},constructor(){e.prototype.constructor.apply(this,arguments)},init(){}})},true);
sap.ui.predefine("ui5/viz/library",["sap/ui/thirdparty/d3"],function(){sap.ui.getCore().initLibrary({name:"ui5.viz",version:"1.0.0",dependencies:[],types:["any","boolean","float","int","object","string","ui5.viz.ChartLegendPosition","ui5.viz.ChartTitlePosition","ui5.viz.ChartSeriesType","ui5.viz.DataPointType","ui5.viz.LineStyle","ui5.viz.ShapeStyle","ui5.viz.AnimationSpeed","ui5.viz.AxisType","ui5.viz.DataPointAnimation","ui5.viz.ColorPalette"],interfaces:[],controls:["ui5.viz.Chart","ui5.viz.ChartSeries","ui5.viz.ChartDataPoint","ui5.viz.ChartLine","ui5.viz.ChartArea","ui5.viz.ChartAxis","ui5.viz.ChartAxisLabel","ui5.viz.Color"],elements:[]});ui5.viz.ChartLegendPosition={Right:"Right",Bottom:"Bottom"};ui5.viz.ChartTitlePosition={Start:"Start",Middle:"Middle",End:"End"};ui5.viz.ChartSeriesType={Spline:"spline",Line:"line",Bar:"bar",Step:"step",AreaLine:"area",AreaSpline:"area-spline",AreaStep:"area-step",RibbonLine:"ribbon-line",RibbonStep:"ribbon-step",RibbonSpline:"ribbon-spline"};ui5.viz.DataPointType={SingleValue:"SingleValue",ValuePair:"ValuePair"};ui5.viz.LineStyle={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};ui5.viz.ShapeStyle={Solid:"Solid",Striped:"Striped"};ui5.viz.AnimationSpeed={None:"None",Slow:"Slow",Medium:"Medium",Fast:"Fast"};ui5.viz.Axis={Y:"Y",Y2:"Y2",X:"X",Z:"Z"};ui5.viz.AxisType={Indexed:"Indexed",Category:"Category",Time:"Time"};ui5.viz.DataPointAnimation={None:"None",Pulsate:"Pulsate"};ui5.viz.ColorPalette={custom:null,Material500:["#2196F3","#4CAF50","#FF9800","#E91E63","#00BCD4","#FFEB3B","#673AB7","#009688","#FFC107","#03A9F4","#CDDC39","#9C27B0","#D32F2F","#3F51B5","#8BC34A","#FF5722"],Material500S:["#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#D32F2F","#E91E63","#9C27B0","#673AB7","#3F51B5"],Material300:["#64B5F6","#81C784","#FFB74D","#F06292","#4DD0E1","#FFF176","#9575CD","#4DB6AC","#FFD54F","#4FC3F7","#DCE775","#BA68C8","#E57373","#7986CB","#AED581","#FF8A65"],Material300S:["#64B5F6","#4FC3F7","#4DD0E1","#4DB6AC","#81C784","#AED581","#DCE775","#FFF176","#FFD54F","#FFB74D","#FF8A65","#E57373","#F06292","#BA68C8","#9575CD","#7986CB"]};ui5.viz.hexToRgba=(i,t=1)=>{const e=t>=0&&t<=1?t:1;const n=ui5.viz.hexToRgbObject(i);return`rgba(${n.r},${n.g},${n.b},${e})`};ui5.viz.hexToRgb=i=>{const t=ui5.viz.hexToRgbObject(i);return`rgb(${t.r},${t.g},${t.b})`};ui5.viz.lightenHexColor=(i,t=0)=>{const{r:e,g:n,b:r}=ui5.viz.hexToRgbObject(i);const o=parseInt(e*(100+t)/100);const a=parseInt(n*(100+t)/100);const s=parseInt(r*(100+t)/100);const u=o<255?o:255;const l=a<255?a:255;const F=s<255?s:255;const C=u.toString(16).length==1?"0"+u.toString(16):u.toString(16);const g=l.toString(16).length==1?"0"+l.toString(16):l.toString(16);const S=F.toString(16).length==1?"0"+F.toString(16):F.toString(16);return`#${C}${g}${S}`};ui5.viz.darkenHexColor=(i,t=0)=>{const{r:e,g:n,b:r}=ui5.viz.hexToRgbObject(i);const o=parseInt(e*(100-t)/100);const a=parseInt(n*(100-t)/100);const s=parseInt(r*(100-t)/100);const u=o<255?o:255;const l=a<255?a:255;const F=s<255?s:255;const C=u.toString(16).length==1?"0"+u.toString(16):u.toString(16);const g=l.toString(16).length==1?"0"+l.toString(16):l.toString(16);const S=F.toString(16).length==1?"0"+F.toString(16):F.toString(16);return`#${C}${g}${S}`};ui5.viz.hexToBWContrastColor=i=>{const t=ui5.viz.hexToRgbObject(i);const e=Math.round((parseInt(t.r,10)*299+parseInt(t.g,10)*587+parseInt(t.b,10)*114)/1e3);const n="#000000";const r="#ffffff";return e>125?n:r};ui5.viz.hexToRgbObject=i=>{const t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(t,(i,t,e,n)=>{return t+t+e+e+n+n});const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}};ui5.viz.setDefaultColorPalette=i=>{ui5.viz.ColorPalette.custom=Array.isArray(i)?i:null};ui5.viz.parseCSSSize=i=>{var t=i.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/i)||[];return{value:parseFloat(i,10),unit:t[2]?t[2].toLowerCase():"px"}};ui5.viz.ChartUpdateCode={DataPoint:"DataPoint",Line:"Line",Area:"Area"};ui5.viz.toValidHtmlID=i=>{return i.replace(/^\d+/g,"x$&").replace(/\s/g,"-").replace(/\W/g,"-")};return ui5.viz});
